{"ast":null,"code":"import _defineProperty from\"/home/akbar/Desktop/project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/akbar/Desktop/project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/akbar/Desktop/project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import\"./Basket.css\";import BasketOrderItem from\"../Components/BasketOrderItem\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Basket=function Basket(){var _React$useState=React.useState(\"Доставка\"),_React$useState2=_slicedToArray(_React$useState,2),active=_React$useState2[0],setActive=_React$useState2[1];var _React$useState3=React.useState(\"individual\"),_React$useState4=_slicedToArray(_React$useState3,2),typeUser=_React$useState4[0],setTypeUser=_React$useState4[1];var _React$useState5=React.useState(null),_React$useState6=_slicedToArray(_React$useState5,2),orders=_React$useState6[0],setOrders=_React$useState6[1];var initialState={userId:localStorage.getItem(\"userData\")?JSON.parse(localStorage.getItem(\"userData\")).userId:\"\",products:JSON.parse(localStorage.getItem(\"salamBasket\")),stir:\"\",entityName:\"\",phone:\"\",city:\"\",street:\"\",typeSending:active};var _React$useState7=React.useState(initialState),_React$useState8=_slicedToArray(_React$useState7,2),entityOrder=_React$useState8[0],setEntityOrder=_React$useState8[1];//quantity order function\nvar quantityHandler=function quantityHandler(e,data){var orderquantity=JSON.parse(localStorage.getItem(\"salamBasket\"));var theOrder=orderquantity.map(function(item){if(item.productId===data._id){item.quantity=+e.target.value;}return item;});localStorage.setItem(\"salamBasket\",JSON.stringify(theOrder));if(e.target.value<0||e.target.value===0){e.target.value=1;}};//delete order function\nvar deleteHandler=function deleteHandler(e,data){var basket=JSON.parse(localStorage.getItem(\"salamBasket\"));if(basket){var filter=basket.filter(function(item){return item.productId!==data._id;});localStorage.setItem(\"salamBasket\",JSON.stringify(filter));}document.location.reload();};//handling input value\nvar _onChange=function onChange(e){setEntityOrder(_objectSpread(_objectSpread({},entityOrder),{},_defineProperty({},e.target.name,e.target.value)));};//radio buttons left side\nvar radioHandler=function radioHandler(e){setActive(e.target.value);setEntityOrder(_objectSpread(_objectSpread({},entityOrder),{},{typeSending:e.target.value}));};//getting orders from localstorage and request\nReact.useEffect(function(){var basket=JSON.parse(localStorage.getItem(\"salamBasket\"));if(basket){var ids=basket.map(function(item){return item.productId;});axios.post(\"/products/cart\",{products:ids},{headers:{\"Content-Type\":\"application/json\"}}).then(function(res){console.log(res.data);setOrders(res.data);});}},[]);//submit order\nvar submitHandler=function submitHandler(e){if(!localStorage.getItem(\"userData\")){window.M.toast({html:\"Пожалуста сначала авторизуйтесь\",classes:\"loginToastYellow\"});return;}else{axios.post(\"/orders\",entityOrder,{headers:{\"Content-Type\":\"application/json\",Authorization:JSON.parse(localStorage.getItem(\"userData\")).token}}).then(function(res){setEntityOrder(initialState);window.M.toast({html:\"Вы успешно отправили ваш заказ\",classes:\"loginToast\"});}).catch(function(e){console.log(e.message);window.M.toast({html:\"Что то прошло не так\",classes:\"loginToast\"});});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u041A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0430\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"basket row \",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"products col s12 l8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col s12 m6 l6\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"choose__option \".concat(active===\"Доставка\"?\"active\":\"\"),children:[/*#__PURE__*/_jsx(\"input\",{className:\"with-gap\",checked:active===\"Доставка\"?true:false,name:\"group1\",type:\"radio\",value:\"Доставка\",onChange:function onChange(e){return radioHandler(e);}}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0414\\u043E\\u0441\\u0442\\u0430\\u0432\\u043A\\u0430\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col s12 m6 l6\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"choose__option \".concat(active===\"Самовывоз\"?\"active\":\"\"),children:[/*#__PURE__*/_jsx(\"input\",{className:\"with-gap\",name:\"group1\",type:\"radio\",value:\"Самовывоз\",onChange:function onChange(e){return radioHandler(e);}}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u0421\\u0430\\u043C\\u043E\\u0432\\u044B\\u0432\\u043E\\u0437\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"basket-orders\",children:orders?orders.map(function(order,index){return/*#__PURE__*/_jsx(BasketOrderItem,{data:order,deleteHandler:deleteHandler,quantityHandler:quantityHandler},index);}):/*#__PURE__*/_jsx(\"h4\",{children:\" \\u041A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0430 \\u043F\\u043E\\u043A\\u0430 \\u043F\\u0443\\u0441\\u0442\\u0430 \"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-order col s12  l4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-price\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"form-price-title\",children:[\"\\u0422\\u043E\\u0432\\u0430\\u0440\\u044B \",/*#__PURE__*/_jsx(\"sup\",{children:\"1\"}),\" \"]}),/*#__PURE__*/_jsx(\"span\",{className:\"form-price-number\",children:\"1\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-summ\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"form-summ-title\",children:\"\\u0418\\u0442\\u043E\\u0433\\u043E\"}),/*#__PURE__*/_jsx(\"span\",{className:\"form-summ-number\",children:\"1\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-action\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn form-btn\",onClick:function onClick(e){return submitHandler(e);},children:\"\\u041E\\u0444\\u043E\\u0440\\u043C\\u0438\\u0442\\u044C \\u0437\\u0430\\u043A\\u0430\\u0437\"})})]}),/*#__PURE__*/_jsx(\"form\",{className:\"form row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col s12\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{className:\"with-gap\",name:\"group1\",type:\"radio\",value:\"individual\",onChange:function onChange(e){return setTypeUser(e.target.value);},checked:typeUser===\"individual\"?true:false}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u042F \\u0444\\u0438\\u0437\\u0438\\u0447\\u0435\\u0441\\u043A\\u043E\\u0435 \\u043B\\u0438\\u0446\\u043E\"})]})}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{className:\"with-gap\",name:\"group1\",type:\"radio\",value:\"entity\",onChange:function onChange(e){return setTypeUser(e.target.value);}}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u042F \\u044E\\u0440\\u0438\\u0434\\u0438\\u0447\\u0435\\u0441\\u043A\\u043E\\u0435 \\u043B\\u0438\\u0446\\u043E\"})]})})]}),typeUser===\"entity\"&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-field col s12\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"stir\",name:\"stir\",type:\"text\",className:\"validate\",onChange:function onChange(e){return _onChange(e);},value:entityOrder.stir}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"stir\",children:\"\\u0418\\u041D\\u041D \\u043E\\u0440\\u0433\\u0430\\u043D\\u0438\\u0437\\u0430\\u0446\\u0438\\u0438\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-field col s12\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"entityName\",name:\"entityName\",type:\"text\",className:\"validate\",onChange:function onChange(e){return _onChange(e);},value:entityOrder.entityName}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"entityName\",children:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043E\\u0440\\u0433\\u0430\\u043D\\u0438\\u0437\\u0430\\u0446\\u0438\\u0438\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-field col s12\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"phone\",type:\"tel\",name:\"phone\",className:\"validate\",onChange:function onChange(e){return _onChange(e);},value:entityOrder.phone}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"phone\",children:\"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D \\u043D\\u043E\\u043C\\u0435\\u0440\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"input-field col s12\",children:/*#__PURE__*/_jsxs(\"select\",{defaultValue:\"DEFAULT\",className:\"browser-default\",onChange:function onChange(e){return _onChange(e);},name:\"city\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"DEFAULT\",disabled:true,children:\"\\u0413\\u043E\\u0440\\u043E\\u0434\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0421\\u0430\\u043C\\u0430\\u0440\\u043A\\u0430\\u043D\\u0434\\u0441\\u043A\\u0430\\u044F \\u043E\\u0431\\u043B\\u0430\\u0441\\u0442\\u044C\",children:\"\\u0421\\u0430\\u043C\\u0430\\u0440\\u043A\\u0430\\u043D\\u0434\\u0441\\u043A\\u0430\\u044F \\u043E\\u0431\\u043B\\u0430\\u0441\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0424\\u0435\\u0440\\u0433\\u0430\\u043D\\u0441\\u043A\\u0430\\u044F \\u043E\\u0431\\u043B\\u0430\\u0441\\u0442\\u044C\",children:\"\\u0424\\u0435\\u0440\\u0433\\u0430\\u043D\\u0441\\u043A\\u0430\\u044F \\u043E\\u0431\\u043B\\u0430\\u0441\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u041A\\u0430\\u0448\\u043A\\u0430\\u0434\\u0430\\u0440\\u044C\\u0438\\u043D\\u0441\\u043A\\u0430\\u044F \\u043E\\u0431\\u043B\\u0430\\u0441\\u0442\\u044C\",children:\"\\u041A\\u0430\\u0448\\u043A\\u0430\\u0434\\u0430\\u0440\\u044C\\u0438\\u043D\\u0441\\u043A\\u0430\\u044F \\u043E\\u0431\\u043B\\u0430\\u0441\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0410\\u043D\\u0434\\u0438\\u0436\\u0430\\u043D\\u0441\\u043A\\u0430\\u044F \\u043E\\u0431\\u043B\\u0430\\u0441\\u0442\\u044C\",children:\"\\u0410\\u043D\\u0434\\u0438\\u0436\\u0430\\u043D\\u0441\\u043A\\u0430\\u044F \\u043E\\u0431\\u043B\\u0430\\u0441\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0422\\u0430\\u0448\\u043A\\u0435\\u043D\\u0442\\u0441\\u043A\\u0430\\u044F \\u043E\\u0431\\u043B\\u0430\\u0441\\u0442\\u044C\",children:\"\\u0422\\u0430\\u0448\\u043A\\u0435\\u043D\\u0442\\u0441\\u043A\\u0430\\u044F \\u043E\\u0431\\u043B\\u0430\\u0441\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u041D\\u0430\\u043C\\u0430\\u043D\\u0433\\u0430\\u043D\\u0441\\u043A\\u0430\\u044F \\u043E\\u0431\\u043B\\u0430\\u0441\\u0442\\u044C\",children:\"\\u041D\\u0430\\u043C\\u0430\\u043D\\u0433\\u0430\\u043D\\u0441\\u043A\\u0430\\u044F \\u043E\\u0431\\u043B\\u0430\\u0441\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0421\\u0443\\u0440\\u0445\\u0430\\u043D\\u0434\\u0430\\u0440\\u044C\\u0438\\u043D\\u0441\\u043A\\u0430\\u044F \\u043E\\u0431\\u043B\\u0430\\u0441\\u0442\\u044C\",children:\"\\u0421\\u0443\\u0440\\u0445\\u0430\\u043D\\u0434\\u0430\\u0440\\u044C\\u0438\\u043D\\u0441\\u043A\\u0430\\u044F \\u043E\\u0431\\u043B\\u0430\\u0441\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0433.\\u0422\\u0430\\u0448\\u043A\\u0435\\u043D\\u0442\",children:\"\\u0433.\\u0422\\u0430\\u0448\\u043A\\u0435\\u043D\\u0442\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0411\\u0443\\u0445\\u0430\\u0440\\u0441\\u043A\\u0430\\u044F \\u043E\\u0431\\u043B\\u0430\\u0441\\u0442\\u044C\",children:\"\\u0411\\u0443\\u0445\\u0430\\u0440\\u0441\\u043A\\u0430\\u044F \\u043E\\u0431\\u043B\\u0430\\u0441\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0425\\u043E\\u0440\\u0435\\u0437\\u043C\\u0441\\u043A\\u0430\\u044F \\u043E\\u0431\\u043B\\u0430\\u0441\\u0442\\u044C\",children:\"\\u0425\\u043E\\u0440\\u0435\\u0437\\u043C\\u0441\\u043A\\u0430\\u044F \\u043E\\u0431\\u043B\\u0430\\u0441\\u0442\\u044C\"}),/*#__PURE__*/_jsxs(\"option\",{value:\"\\u0420\\u0435\\u0441\\u043F\\u0443\\u0431\\u043B\\u0438\\u043A\\u0430 \\u041A\\u0430\\u0440\\u0430\\u043A\\u0430\\u043B\\u043F\\u0430\\u043A\\u0441\\u0442\\u0430\\u043D\\t\",children:[\"\\u0420\\u0435\\u0441\\u043F\\u0443\\u0431\\u043B\\u0438\\u043A\\u0430 \\u041A\\u0430\\u0440\\u0430\\u043A\\u0430\\u043B\\u043F\\u0430\\u043A\\u0441\\u0442\\u0430\\u043D\",\" \"]}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0414\\u0436\\u0438\\u0437\\u0430\\u043A\\u0441\\u043A\\u0430\\u044F \\u043E\\u0431\\u043B\\u0430\\u0441\\u0442\\u044C\",children:\"\\u0414\\u0436\\u0438\\u0437\\u0430\\u043A\\u0441\\u043A\\u0430\\u044F \\u043E\\u0431\\u043B\\u0430\\u0441\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u041D\\u0430\\u0432\\u043E\\u0438\\u0439\\u0441\\u043A\\u0430\\u044F \\u043E\\u0431\\u043B\\u0430\\u0441\\u0442\\u044C\",children:\"\\u041D\\u0430\\u0432\\u043E\\u0438\\u0439\\u0441\\u043A\\u0430\\u044F \\u043E\\u0431\\u043B\\u0430\\u0441\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"option\",{value:\"\\u0421\\u044B\\u0440\\u0434\\u0430\\u0440\\u044C\\u0438\\u043D\\u0441\\u043A\\u0430\\u044F \\u043E\\u0431\\u043B\\u0430\\u0441\\u0442\\u044C\",children:\"\\u0421\\u044B\\u0440\\u0434\\u0430\\u0440\\u044C\\u0438\\u043D\\u0441\\u043A\\u0430\\u044F \\u043E\\u0431\\u043B\\u0430\\u0441\\u0442\\u044C\"})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-field col s12\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"street\",type:\"text\",name:\"street\",className:\"validate\",onChange:function onChange(e){return _onChange(e);},value:entityOrder.street}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"street\",children:\"\\u0423\\u043B\\u0438\\u0446\\u0430\"})]})})]})})]})]})]});};export default Basket;","map":{"version":3,"sources":["/home/akbar/Desktop/project/client/src/pages/Basket.js"],"names":["React","BasketOrderItem","axios","Basket","useState","active","setActive","typeUser","setTypeUser","orders","setOrders","initialState","userId","localStorage","getItem","JSON","parse","products","stir","entityName","phone","city","street","typeSending","entityOrder","setEntityOrder","quantityHandler","e","data","orderquantity","theOrder","map","item","productId","_id","quantity","target","value","setItem","stringify","deleteHandler","basket","filter","document","location","reload","onChange","name","radioHandler","useEffect","ids","post","headers","then","res","console","log","submitHandler","window","M","toast","html","classes","Authorization","token","catch","message","order","index"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport \"./Basket.css\";\r\nimport BasketOrderItem from \"../Components/BasketOrderItem\";\r\nimport axios from \"axios\";\r\n\r\nconst Basket = () => {\r\n  const [active, setActive] = React.useState(\"Доставка\");\r\n  const [typeUser, setTypeUser] = React.useState(\"individual\");\r\n  const [orders, setOrders] = React.useState(null);\r\n\r\n  const initialState = {\r\n    userId: localStorage.getItem(\"userData\")\r\n      ? JSON.parse(localStorage.getItem(\"userData\")).userId\r\n      : \"\",\r\n    products: JSON.parse(localStorage.getItem(\"salamBasket\")),\r\n    stir: \"\",\r\n    entityName: \"\",\r\n    phone: \"\",\r\n    city: \"\",\r\n    street: \"\",\r\n    typeSending: active,\r\n  };\r\n\r\n  const [entityOrder, setEntityOrder] = React.useState(initialState);\r\n\r\n  //quantity order function\r\n  const quantityHandler = (e, data) => {\r\n    const orderquantity = JSON.parse(localStorage.getItem(\"salamBasket\"));\r\n    let theOrder = orderquantity.map((item) => {\r\n      if (item.productId === data._id) {\r\n        item.quantity = +e.target.value;\r\n      }\r\n\r\n      return item;\r\n    });\r\n\r\n    localStorage.setItem(\"salamBasket\", JSON.stringify(theOrder));\r\n\r\n    if (e.target.value < 0 || e.target.value === 0) {\r\n      e.target.value = 1;\r\n    }\r\n  };\r\n\r\n  //delete order function\r\n  const deleteHandler = (e, data) => {\r\n    let basket = JSON.parse(localStorage.getItem(\"salamBasket\"));\r\n    if (basket) {\r\n      const filter = basket.filter((item) => item.productId !== data._id);\r\n      localStorage.setItem(\"salamBasket\", JSON.stringify(filter));\r\n    }\r\n\r\n    document.location.reload();\r\n  };\r\n\r\n  //handling input value\r\n  const onChange = (e) => {\r\n    setEntityOrder({ ...entityOrder, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  //radio buttons left side\r\n  const radioHandler = (e) => {\r\n    setActive(e.target.value);\r\n    setEntityOrder({ ...entityOrder, typeSending: e.target.value });\r\n  };\r\n\r\n  //getting orders from localstorage and request\r\n  React.useEffect(() => {\r\n    const basket = JSON.parse(localStorage.getItem(\"salamBasket\"));\r\n    if (basket) {\r\n      const ids = basket.map((item) => item.productId);\r\n\r\n      axios\r\n        .post(\r\n          \"/products/cart\",\r\n          { products: ids },\r\n          {\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n            },\r\n          }\r\n        )\r\n        .then((res) => {\r\n          console.log(res.data);\r\n          setOrders(res.data);\r\n        });\r\n    }\r\n  }, []);\r\n\r\n  //submit order\r\n  const submitHandler = (e) => {\r\n    if (!localStorage.getItem(\"userData\")) {\r\n      window.M.toast({\r\n        html: \"Пожалуста сначала авторизуйтесь\",\r\n        classes: \"loginToastYellow\",\r\n      });\r\n      return;\r\n    } else {\r\n      axios\r\n        .post(\"/orders\", entityOrder, {\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            Authorization: JSON.parse(localStorage.getItem(\"userData\")).token,\r\n          },\r\n        })\r\n        .then((res) => {\r\n          setEntityOrder(initialState);\r\n          window.M.toast({\r\n            html: \"Вы успешно отправили ваш заказ\",\r\n            classes: \"loginToast\",\r\n          });\r\n        })\r\n        .catch((e) => {\r\n          console.log(e.message);\r\n          window.M.toast({\r\n            html: \"Что то прошло не так\",\r\n            classes: \"loginToast\",\r\n          });\r\n        });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h1>Корзина</h1>\r\n      <div className=\"basket row \">\r\n        <div className=\"products col s12 l8\">\r\n          <div className=\"row\">\r\n            <div className=\"col s12 m6 l6\">\r\n              <label\r\n                className={`choose__option ${\r\n                  active === \"Доставка\" ? \"active\" : \"\"\r\n                }`}\r\n              >\r\n                <input\r\n                  className=\"with-gap\"\r\n                  checked={active === \"Доставка\" ? true : false}\r\n                  name=\"group1\"\r\n                  type=\"radio\"\r\n                  value={\"Доставка\"}\r\n                  onChange={(e) => radioHandler(e)}\r\n                />\r\n                <span>Доставка</span>\r\n              </label>\r\n            </div>\r\n            <div className=\"col s12 m6 l6\">\r\n              <label\r\n                className={`choose__option ${\r\n                  active === \"Самовывоз\" ? \"active\" : \"\"\r\n                }`}\r\n              >\r\n                <input\r\n                  className=\"with-gap\"\r\n                  name=\"group1\"\r\n                  type=\"radio\"\r\n                  value={\"Самовывоз\"}\r\n                  onChange={(e) => radioHandler(e)}\r\n                />\r\n                <span>Самовывоз</span>\r\n              </label>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"basket-orders\">\r\n            {orders ? (\r\n              orders.map((order, index) => (\r\n                <BasketOrderItem\r\n                  data={order}\r\n                  key={index}\r\n                  deleteHandler={deleteHandler}\r\n                  quantityHandler={quantityHandler}\r\n                />\r\n              ))\r\n            ) : (\r\n              <h4> Корзина пока пуста </h4>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"product-order col s12  l4\">\r\n          <div className=\"form row\">\r\n            <div className=\"form-price\">\r\n              <span className=\"form-price-title\">\r\n                Товары <sup>1</sup>{\" \"}\r\n              </span>\r\n              <span className=\"form-price-number\">1</span>\r\n            </div>\r\n            <div className=\"form-summ\">\r\n              <span className=\"form-summ-title\">Итого</span>\r\n              <span className=\"form-summ-number\">1</span>\r\n            </div>\r\n            <div className=\"form-action\">\r\n              <button\r\n                className=\"btn form-btn\"\r\n                onClick={(e) => submitHandler(e)}\r\n              >\r\n                Оформить заказ\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <form className=\"form row\">\r\n            <div className=\"col s12\">\r\n              <div className=\"row\">\r\n                <p>\r\n                  <label>\r\n                    <input\r\n                      className=\"with-gap\"\r\n                      name=\"group1\"\r\n                      type=\"radio\"\r\n                      value={\"individual\"}\r\n                      onChange={(e) => setTypeUser(e.target.value)}\r\n                      checked={typeUser === \"individual\" ? true : false}\r\n                    />\r\n                    <span>Я физическое лицо</span>\r\n                  </label>\r\n                </p>\r\n\r\n                <p>\r\n                  <label>\r\n                    <input\r\n                      className=\"with-gap\"\r\n                      name=\"group1\"\r\n                      type=\"radio\"\r\n                      value={\"entity\"}\r\n                      onChange={(e) => setTypeUser(e.target.value)}\r\n                    />\r\n                    <span>Я юридическое лицо</span>\r\n                  </label>\r\n                </p>\r\n              </div>\r\n              {/* Я юридическое лицо */}\r\n              {typeUser === \"entity\" && (\r\n                <>\r\n                  <div className=\"row\">\r\n                    <div className=\"input-field col s12\">\r\n                      <input\r\n                        id=\"stir\"\r\n                        name=\"stir\"\r\n                        type=\"text\"\r\n                        className=\"validate\"\r\n                        onChange={(e) => onChange(e)}\r\n                        value={entityOrder.stir}\r\n                      />\r\n                      <label htmlFor=\"stir\">ИНН организации</label>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"row\">\r\n                    <div className=\"input-field col s12\">\r\n                      <input\r\n                        id=\"entityName\"\r\n                        name=\"entityName\"\r\n                        type=\"text\"\r\n                        className=\"validate\"\r\n                        onChange={(e) => onChange(e)}\r\n                        value={entityOrder.entityName}\r\n                      />\r\n                      <label htmlFor=\"entityName\">Название организации</label>\r\n                    </div>\r\n                  </div>\r\n                </>\r\n              )}\r\n              <div className=\"row\">\r\n                <div className=\"input-field col s12\">\r\n                  <input\r\n                    id=\"phone\"\r\n                    type=\"tel\"\r\n                    name=\"phone\"\r\n                    className=\"validate\"\r\n                    onChange={(e) => onChange(e)}\r\n                    value={entityOrder.phone}\r\n                  />\r\n                  <label htmlFor=\"phone\">Телефон номер</label>\r\n                </div>\r\n              </div>\r\n              <div className=\"row\">\r\n                <div className=\"input-field col s12\">\r\n                  <select\r\n                    defaultValue={\"DEFAULT\"}\r\n                    className=\"browser-default\"\r\n                    onChange={(e) => onChange(e)}\r\n                    name=\"city\"\r\n                  >\r\n                    <option value=\"DEFAULT\" disabled>\r\n                      Город\r\n                    </option>\r\n                    <option value=\"Самаркандская область\">\r\n                      Самаркандская область\r\n                    </option>\r\n                    <option value=\"Ферганская область\">\r\n                      Ферганская область\r\n                    </option>\r\n                    <option value=\"Кашкадарьинская область\">\r\n                      Кашкадарьинская область\r\n                    </option>\r\n                    <option value=\"Андижанская область\">\r\n                      Андижанская область\r\n                    </option>\r\n                    <option value=\"Ташкентская область\">\r\n                      Ташкентская область\r\n                    </option>\r\n                    <option value=\"Наманганская область\">\r\n                      Наманганская область\r\n                    </option>\r\n                    <option value=\"Сурхандарьинская область\">\r\n                      Сурхандарьинская область\r\n                    </option>\r\n                    <option value=\"г.Ташкент\">г.Ташкент</option>\r\n                    <option value=\"Бухарская область\">Бухарская область</option>\r\n                    <option value=\"Хорезмская область\">\r\n                      Хорезмская область\r\n                    </option>\r\n                    <option value=\"Республика Каракалпакстан\t\">\r\n                      Республика Каракалпакстан{\" \"}\r\n                    </option>\r\n                    <option value=\"Джизакская область\">\r\n                      Джизакская область\r\n                    </option>\r\n                    <option value=\"Навоийская область\">\r\n                      Навоийская область\r\n                    </option>\r\n                    <option value=\"Сырдарьинская область\">\r\n                      Сырдарьинская область\r\n                    </option>\r\n                  </select>\r\n                </div>\r\n              </div>\r\n              <div className=\"row\">\r\n                <div className=\"input-field col s12\">\r\n                  <input\r\n                    id=\"street\"\r\n                    type=\"text\"\r\n                    name=\"street\"\r\n                    className=\"validate\"\r\n                    onChange={(e) => onChange(e)}\r\n                    value={entityOrder.street}\r\n                  />\r\n                  <label htmlFor=\"street\">Улица</label>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Basket;\r\n"]},"metadata":{},"sourceType":"module"}