{"ast":null,"code":"import _slicedToArray from\"/home/akbar/Desktop/akbarsfolder/project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import AdminSidebar from\"../../Components/AdminSidebar\";import\"./AdminUsersPage.css\";import axios from\"axios\";import Loading from\"../../Components/Loading/Loading\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AdminSubSubCategoryPage=function AdminSubSubCategoryPage(){var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),subSubCategories=_React$useState2[0],setSubSubCategories=_React$useState2[1];var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),subCategories=_React$useState4[0],setSubCategories=_React$useState4[1];var _React$useState5=React.useState([]),_React$useState6=_slicedToArray(_React$useState5,2),categories=_React$useState6[0],setCategories=_React$useState6[1];var _React$useState7=React.useState([]),_React$useState8=_slicedToArray(_React$useState7,2),filteredSubCategories=_React$useState8[0],setFilteredSubCategories=_React$useState8[1];var _React$useState9=React.useState(\"\"),_React$useState10=_slicedToArray(_React$useState9,2),subSubCategoryName=_React$useState10[0],setSubSubCategoryName=_React$useState10[1];var _React$useState11=React.useState(\"\"),_React$useState12=_slicedToArray(_React$useState11,2),subCategoryName=_React$useState12[0],setSubCategoryName=_React$useState12[1];var _React$useState13=React.useState(\"\"),_React$useState14=_slicedToArray(_React$useState13,2),categoryName=_React$useState14[0],setCategoryName=_React$useState14[1];var _React$useState15=React.useState(\"\"),_React$useState16=_slicedToArray(_React$useState15,2),deleted=_React$useState16[0],setDeleted=_React$useState16[1];var deleteHandler=function deleteHandler(e,id){var _JSON$parse=JSON.parse(localStorage.getItem(\"userData\")),token=_JSON$parse.token;axios.delete(\"/subsubcategory/\".concat(id),{headers:{Authorization:\"Bearer \".concat(token)}}).then(function(res){console.log(res.data);setDeleted(res.data.message+Date.now());window.M.toast({html:\"Удалено\",classes:\"loginToastYellow\"});}).catch(function(e){window.M.toast({html:e.message,classes:\"loginToastRed\"});});};React.useEffect(function(){var _JSON$parse2=JSON.parse(localStorage.getItem(\"userData\")),token=_JSON$parse2.token;axios.get(\"/subcategory\",{headers:{Authorization:\"Bearer \".concat(token)}}).then(function(_ref){var data=_ref.data;setSubCategories(data);});},[deleted]);React.useEffect(function(){var _JSON$parse3=JSON.parse(localStorage.getItem(\"userData\")),token=_JSON$parse3.token;axios.get(\"/category\",{headers:{Authorization:\"Bearer \".concat(token)}}).then(function(_ref2){var data=_ref2.data;setCategories(data);});},[deleted]);React.useEffect(function(){var _JSON$parse4=JSON.parse(localStorage.getItem(\"userData\")),token=_JSON$parse4.token;axios.get(\"/subsubcategory\",{headers:{Authorization:\"Bearer \".concat(token)}}).then(function(_ref3){var data=_ref3.data;setSubSubCategories(data);});},[deleted]);var submitHandler=function submitHandler(e){e.preventDefault();var _JSON$parse5=JSON.parse(localStorage.getItem(\"userData\")),token=_JSON$parse5.token;axios.post(\"/subsubcategory\",{subSubCategoryName:subSubCategoryName,subCategory:subCategoryName,category:categoryName},{headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \".concat(token)}}).then(function(res){setDeleted(res.data._id+Date.now());window.M.toast({html:\"Подподкатегория создана\",classes:\"loginToast\"});}).catch(function(e){window.M.toast({html:e.message,classes:\"loginToastRed\"});});};var categoryHandler=function categoryHandler(e){setCategoryName(e.target.value);var filteredSubCategories=subCategories.filter(function(el){return el.category===e.target.value;});setFilteredSubCategories(filteredSubCategories);};return/*#__PURE__*/_jsxs(\"div\",{className:\"adminPage\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"modal1\",className:\"modal modal-fixed-footer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"C\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u043F\\u043E\\u0434\\u043F\\u043E\\u0434\\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044E\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){return submitHandler(e);},style:{padding:\"30px 60px\"},children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"input-field col s12\",children:/*#__PURE__*/_jsxs(\"select\",{value:categoryName,onChange:function onChange(e){return categoryHandler(e);},className:\"browser-default\",children:[/*#__PURE__*/_jsx(\"option\",{defaultValue:\"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\",children:\"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"}),categories.length>0&&categories.map(function(el){return/*#__PURE__*/_jsx(\"option\",{value:el._categoryName,children:el.categoryName},el._id);})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"input-field col s12\",children:/*#__PURE__*/_jsxs(\"select\",{value:subCategoryName,onChange:function onChange(e){return setSubCategoryName(e.target.value);},className:\"browser-default\",disabled:categoryName?false:true,children:[/*#__PURE__*/_jsx(\"option\",{style:{borderBottom:\"1px solid #000\"},defaultValue:\"\\u041F\\u043E\\u0434\\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\",children:\"\\u041F\\u043E\\u0434\\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"}),filteredSubCategories.length>0&&filteredSubCategories.map(function(el){return/*#__PURE__*/_jsx(\"option\",{value:el._subCategoryName,children:el.subCategoryName},el._id);})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-field col s12\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"categoryName\",type:\"text\",required:true,className:\"validate\",value:subSubCategoryName,onChange:function onChange(e){return setSubSubCategoryName(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"categoryName\",children:\"\\u041F\\u043E\\u0434\\u043F\\u043E\\u0434\\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"input-field col s12\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn waves-effect waves-green green btn-flat close-modal\",type:\"submit\",children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C\"})})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-footer\"})]}),/*#__PURE__*/_jsx(AdminSidebar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"adminUsersPage\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"adminProductsPageHeader\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"adminProductPageTitle\",children:\"\\u0412\\u0441\\u0435 \\u043F\\u043E\\u0434\\u043F\\u043E\\u0434\\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u0438\"}),/*#__PURE__*/_jsx(\"button\",{\"data-target\":\"modal1\",className:\"btn modal-trigger right-align\",onClick:function onClick(e){var elem=document.querySelectorAll(\".modal\");window.M.Modal.init(elem);},children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u043F\\u043E\\u0434\\u043F\\u043E\\u0434\\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044E\"})]}),/*#__PURE__*/_jsxs(\"table\",{className:\"striped\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\u2116\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u041F\\u043E\\u0434\\u043F\\u043E\\u0434\\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u041F\\u043E\\u0434\\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u043D\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:subSubCategories.length>0&&subSubCategories.map(function(el,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:index+1}),/*#__PURE__*/_jsx(\"th\",{children:el.subSubCategoryName}),/*#__PURE__*/_jsx(\"th\",{children:el.subCategory}),/*#__PURE__*/_jsx(\"th\",{children:el.category}),/*#__PURE__*/_jsx(\"th\",{children:new Date(el.createdAt).toDateString()}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(Link,{to:\"/admin/subsubcategory/\".concat(el._id),className:\"btn yellow accent-4 waves-effect waves-light\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return deleteHandler(e,el._id);},className:\"btn deep-orange darken-1 waves-effect waves-light\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})})]},index+1);})})]}),subSubCategories.length===0&&/*#__PURE__*/_jsx(Loading,{})]})]});};export default AdminSubSubCategoryPage;","map":{"version":3,"sources":["/home/akbar/Desktop/akbarsfolder/project/client/src/pages/adminpages/AdminSubSubCategoryPage.js"],"names":["React","AdminSidebar","axios","Loading","Link","AdminSubSubCategoryPage","useState","subSubCategories","setSubSubCategories","subCategories","setSubCategories","categories","setCategories","filteredSubCategories","setFilteredSubCategories","subSubCategoryName","setSubSubCategoryName","subCategoryName","setSubCategoryName","categoryName","setCategoryName","deleted","setDeleted","deleteHandler","e","id","JSON","parse","localStorage","getItem","token","delete","headers","Authorization","then","res","console","log","data","message","Date","now","window","M","toast","html","classes","catch","useEffect","get","submitHandler","preventDefault","post","subCategory","category","_id","categoryHandler","target","value","filter","el","padding","length","map","_categoryName","borderBottom","_subCategoryName","elem","document","querySelectorAll","Modal","init","index","createdAt","toDateString"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport AdminSidebar from \"../../Components/AdminSidebar\";\nimport \"./AdminUsersPage.css\";\nimport axios from \"axios\";\nimport Loading from \"../../Components/Loading/Loading\";\nimport { Link } from \"react-router-dom\";\n\nconst AdminSubSubCategoryPage = () => {\n  const [subSubCategories, setSubSubCategories] = React.useState([]);\n  const [subCategories, setSubCategories] = React.useState([]);\n  const [categories, setCategories] = React.useState([]);\n  const [filteredSubCategories, setFilteredSubCategories] = React.useState([]);\n\n  const [subSubCategoryName, setSubSubCategoryName] = React.useState(\"\");\n  const [subCategoryName, setSubCategoryName] = React.useState(\"\");\n  const [categoryName, setCategoryName] = React.useState(\"\");\n\n  const [deleted, setDeleted] = React.useState(\"\");\n\n  const deleteHandler = (e, id) => {\n    const { token } = JSON.parse(localStorage.getItem(\"userData\"));\n\n    axios\n      .delete(`/subsubcategory/${id}`, {\n        headers: { Authorization: `Bearer ${token}` },\n      })\n      .then((res) => {\n        console.log(res.data);\n        setDeleted(res.data.message + Date.now());\n        window.M.toast({\n          html: \"Удалено\",\n          classes: \"loginToastYellow\",\n        });\n      })\n      .catch((e) => {\n        window.M.toast({\n          html: e.message,\n          classes: \"loginToastRed\",\n        });\n      });\n  };\n\n  React.useEffect(() => {\n    const { token } = JSON.parse(localStorage.getItem(\"userData\"));\n\n    axios\n      .get(\"/subcategory\", {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n      .then(({ data }) => {\n        setSubCategories(data);\n      });\n  }, [deleted]);\n\n  React.useEffect(() => {\n    const { token } = JSON.parse(localStorage.getItem(\"userData\"));\n\n    axios\n      .get(\"/category\", {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n      .then(({ data }) => {\n        setCategories(data);\n      });\n  }, [deleted]);\n\n  React.useEffect(() => {\n    const { token } = JSON.parse(localStorage.getItem(\"userData\"));\n\n    axios\n      .get(\"/subsubcategory\", {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n      .then(({ data }) => {\n        setSubSubCategories(data);\n      });\n  }, [deleted]);\n\n  const submitHandler = (e) => {\n    e.preventDefault();\n\n    const { token } = JSON.parse(localStorage.getItem(\"userData\"));\n\n    axios\n      .post(\n        \"/subsubcategory\",\n        {\n          subSubCategoryName,\n          subCategory: subCategoryName,\n          category: categoryName,\n        },\n        {\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token}`,\n          },\n        }\n      )\n      .then((res) => {\n        setDeleted(res.data._id + Date.now());\n        window.M.toast({\n          html: \"Подподкатегория создана\",\n          classes: \"loginToast\",\n        });\n      })\n      .catch((e) => {\n        window.M.toast({\n          html: e.message,\n          classes: \"loginToastRed\",\n        });\n      });\n  };\n\n  const categoryHandler = (e) => {\n    setCategoryName(e.target.value);\n    const filteredSubCategories = subCategories.filter(\n      (el) => el.category === e.target.value\n    );\n    setFilteredSubCategories(filteredSubCategories);\n  };\n\n  return (\n    <div className=\"adminPage\">\n      <div id=\"modal1\" className=\"modal modal-fixed-footer\">\n        <div className=\"modal-content\">\n          <h4>Cоздать подподкатегорию</h4>\n          <form\n            onSubmit={(e) => submitHandler(e)}\n            style={{ padding: \"30px 60px\" }}\n          >\n            <div className=\"row\">\n              <div className=\"input-field col s12\">\n                <select\n                  value={categoryName}\n                  onChange={(e) => categoryHandler(e)}\n                  className=\"browser-default\"\n                >\n                  <option defaultValue=\"Категория\">Категория</option>\n                  {categories.length > 0 &&\n                    categories.map((el) => (\n                      <option key={el._id} value={el._categoryName}>\n                        {el.categoryName}\n                      </option>\n                    ))}\n                </select>\n              </div>\n            </div>\n\n            <div className=\"row\">\n              <div className=\"input-field col s12\">\n                <select\n                  value={subCategoryName}\n                  onChange={(e) => setSubCategoryName(e.target.value)}\n                  className=\"browser-default\"\n                  disabled={categoryName ? false : true}\n                >\n                  <option\n                    style={{ borderBottom: \"1px solid #000\" }}\n                    defaultValue=\"Подкатегория\"\n                  >\n                    Подкатегория\n                  </option>\n\n                  {filteredSubCategories.length > 0 &&\n                    filteredSubCategories.map((el) => (\n                      <option key={el._id} value={el._subCategoryName}>\n                        {el.subCategoryName}\n                      </option>\n                    ))}\n                </select>\n              </div>\n            </div>\n\n            <div className=\"row\">\n              <div className=\"input-field col s12\">\n                <input\n                  id=\"categoryName\"\n                  type=\"text\"\n                  required\n                  className=\"validate\"\n                  value={subSubCategoryName}\n                  onChange={(e) => setSubSubCategoryName(e.target.value)}\n                />\n                <label htmlFor=\"categoryName\">Подподкатегория</label>\n              </div>\n            </div>\n\n            <div className=\"row\">\n              <div className=\"input-field col s12\">\n                <button\n                  className=\"btn waves-effect waves-green green btn-flat close-modal\"\n                  type=\"submit\"\n                >\n                  Создать\n                </button>\n              </div>\n            </div>\n          </form>\n        </div>\n        <div className=\"modal-footer\"></div>\n      </div>\n      <AdminSidebar />\n      <div className=\"adminUsersPage\">\n        <div className=\"adminProductsPageHeader\">\n          <p className=\"adminProductPageTitle\">Все подподкатегории</p>\n          <button\n            data-target=\"modal1\"\n            className=\"btn modal-trigger right-align\"\n            onClick={(e) => {\n              const elem = document.querySelectorAll(\".modal\");\n              window.M.Modal.init(elem);\n            }}\n          >\n            Создать подподкатегорию\n          </button>\n        </div>\n\n        <table className=\"striped\">\n          <thead>\n            <tr>\n              <th>№</th>\n              <th>Подподкатегория</th>\n              <th>Подкатегория</th>\n              <th>Категория</th>\n              <th>Создан</th>\n              <th>Изменить</th>\n              <th>Удалить</th>\n            </tr>\n          </thead>\n\n          <tbody>\n            {subSubCategories.length > 0 &&\n              subSubCategories.map((el, index) => (\n                <tr key={index + 1}>\n                  <th>{index + 1}</th>\n                  <th>{el.subSubCategoryName}</th>\n                  <th>{el.subCategory}</th>\n                  <th>{el.category}</th>\n                  <th>{new Date(el.createdAt).toDateString()}</th>\n                  <th>\n                    <Link\n                      to={`/admin/subsubcategory/${el._id}`}\n                      className=\"btn yellow accent-4 waves-effect waves-light\"\n                    >\n                      <i className=\"fas fa-edit\"></i>\n                    </Link>\n                  </th>\n                  <th>\n                    <button\n                      onClick={(e) => deleteHandler(e, el._id)}\n                      className=\"btn deep-orange darken-1 waves-effect waves-light\"\n                    >\n                      <i className=\"fas fa-trash\"></i>\n                    </button>\n                  </th>\n                </tr>\n              ))}\n          </tbody>\n        </table>\n        {subSubCategories.length === 0 && <Loading />}\n      </div>\n    </div>\n  );\n};\n\nexport default AdminSubSubCategoryPage;\n"]},"metadata":{},"sourceType":"module"}