{"ast":null,"code":"import _slicedToArray from\"/home/akbar/Desktop/salam/final/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useCallback,useEffect}from\"react\";var storageName=\"userData\";export var useAuth=function useAuth(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),token=_useState2[0],setToken=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),userId=_useState4[0],setUserId=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),user=_useState6[0],setUser=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),addProduct=_useState8[0],setAddProduct=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),orderViewer=_useState10[0],setOrderViewer=_useState10[1];var login=useCallback(function(jwtToken,id,isAdmin,isAdminAddedProduct,isAdminOrderViewer){setToken(jwtToken);setUserId(id);setUser(isAdmin);setAddProduct(isAdminAddedProduct);setOrderViewer(isAdminOrderViewer);localStorage.setItem(storageName,JSON.stringify({userId:id,token:jwtToken,user:isAdmin,addProduct:isAdminAddedProduct,orderViewer:isAdminOrderViewer}));},[]);var logout=useCallback(function(){setToken(null);setUserId(null);setUser(null);setAddProduct(null);setOrderViewer(null);localStorage.removeItem(storageName);},[]);useEffect(function(){var data=JSON.parse(localStorage.getItem(storageName));if(data&&data.token){login(data.token,data.userId,data.user,data.addProduct,data.orderViewer);}},[login]);return{login:login,logout:logout,token:token,userId:userId,user:user,addProduct:addProduct,orderViewer:orderViewer};};","map":{"version":3,"sources":["/home/akbar/Desktop/salam/final/client/src/hooks/useAuth.js"],"names":["useState","useCallback","useEffect","storageName","useAuth","token","setToken","userId","setUserId","user","setUser","addProduct","setAddProduct","orderViewer","setOrderViewer","login","jwtToken","id","isAdmin","isAdminAddedProduct","isAdminOrderViewer","localStorage","setItem","JSON","stringify","logout","removeItem","data","parse","getItem"],"mappings":"6JAAA,OAASA,QAAT,CAAmBC,WAAnB,CAAgCC,SAAhC,KAAiD,OAAjD,CAEA,GAAMC,CAAAA,WAAW,CAAG,UAApB,CAEA,MAAO,IAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,eACDJ,QAAQ,CAAC,IAAD,CADP,wCACpBK,KADoB,eACbC,QADa,8BAECN,QAAQ,CAAC,IAAD,CAFT,yCAEpBO,MAFoB,eAEZC,SAFY,8BAGHR,QAAQ,CAAC,IAAD,CAHL,yCAGpBS,IAHoB,eAGdC,OAHc,8BAISV,QAAQ,CAAC,IAAD,CAJjB,yCAIpBW,UAJoB,eAIRC,aAJQ,8BAKWZ,QAAQ,CAAC,IAAD,CALnB,0CAKpBa,WALoB,gBAKPC,cALO,gBAO3B,GAAMC,CAAAA,KAAK,CAAGd,WAAW,CACvB,SAACe,QAAD,CAAWC,EAAX,CAAeC,OAAf,CAAwBC,mBAAxB,CAA6CC,kBAA7C,CAAoE,CAClEd,QAAQ,CAACU,QAAD,CAAR,CACAR,SAAS,CAACS,EAAD,CAAT,CACAP,OAAO,CAACQ,OAAD,CAAP,CACAN,aAAa,CAACO,mBAAD,CAAb,CACAL,cAAc,CAACM,kBAAD,CAAd,CAEAC,YAAY,CAACC,OAAb,CACEnB,WADF,CAEEoB,IAAI,CAACC,SAAL,CAAe,CACbjB,MAAM,CAAEU,EADK,CAEbZ,KAAK,CAAEW,QAFM,CAGbP,IAAI,CAAES,OAHO,CAIbP,UAAU,CAAEQ,mBAJC,CAKbN,WAAW,CAAEO,kBALA,CAAf,CAFF,EAUD,CAlBsB,CAmBvB,EAnBuB,CAAzB,CAsBA,GAAMK,CAAAA,MAAM,CAAGxB,WAAW,CAAC,UAAM,CAC/BK,QAAQ,CAAC,IAAD,CAAR,CACAE,SAAS,CAAC,IAAD,CAAT,CACAE,OAAO,CAAC,IAAD,CAAP,CACAE,aAAa,CAAC,IAAD,CAAb,CACAE,cAAc,CAAC,IAAD,CAAd,CAEAO,YAAY,CAACK,UAAb,CAAwBvB,WAAxB,EACD,CARyB,CAQvB,EARuB,CAA1B,CAUAD,SAAS,CAAC,UAAM,CACd,GAAMyB,CAAAA,IAAI,CAAGJ,IAAI,CAACK,KAAL,CAAWP,YAAY,CAACQ,OAAb,CAAqB1B,WAArB,CAAX,CAAb,CAEA,GAAIwB,IAAI,EAAIA,IAAI,CAACtB,KAAjB,CAAwB,CACtBU,KAAK,CACHY,IAAI,CAACtB,KADF,CAEHsB,IAAI,CAACpB,MAFF,CAGHoB,IAAI,CAAClB,IAHF,CAIHkB,IAAI,CAAChB,UAJF,CAKHgB,IAAI,CAACd,WALF,CAAL,CAOD,CACF,CAZQ,CAYN,CAACE,KAAD,CAZM,CAAT,CAcA,MAAO,CAAEA,KAAK,CAALA,KAAF,CAASU,MAAM,CAANA,MAAT,CAAiBpB,KAAK,CAALA,KAAjB,CAAwBE,MAAM,CAANA,MAAxB,CAAgCE,IAAI,CAAJA,IAAhC,CAAsCE,UAAU,CAAVA,UAAtC,CAAkDE,WAAW,CAAXA,WAAlD,CAAP,CACD,CAtDM","sourcesContent":["import { useState, useCallback, useEffect } from \"react\";\r\n\r\nconst storageName = \"userData\";\r\n\r\nexport const useAuth = () => {\r\n  const [token, setToken] = useState(null);\r\n  const [userId, setUserId] = useState(null);\r\n  const [user, setUser] = useState(null);\r\n  const [addProduct, setAddProduct] = useState(null);\r\n  const [orderViewer, setOrderViewer] = useState(null);\r\n\r\n  const login = useCallback(\r\n    (jwtToken, id, isAdmin, isAdminAddedProduct, isAdminOrderViewer) => {\r\n      setToken(jwtToken);\r\n      setUserId(id);\r\n      setUser(isAdmin);\r\n      setAddProduct(isAdminAddedProduct);\r\n      setOrderViewer(isAdminOrderViewer);\r\n\r\n      localStorage.setItem(\r\n        storageName,\r\n        JSON.stringify({\r\n          userId: id,\r\n          token: jwtToken,\r\n          user: isAdmin,\r\n          addProduct: isAdminAddedProduct,\r\n          orderViewer: isAdminOrderViewer,\r\n        })\r\n      );\r\n    },\r\n    []\r\n  );\r\n\r\n  const logout = useCallback(() => {\r\n    setToken(null);\r\n    setUserId(null);\r\n    setUser(null);\r\n    setAddProduct(null);\r\n    setOrderViewer(null);\r\n\r\n    localStorage.removeItem(storageName);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const data = JSON.parse(localStorage.getItem(storageName));\r\n\r\n    if (data && data.token) {\r\n      login(\r\n        data.token,\r\n        data.userId,\r\n        data.user,\r\n        data.addProduct,\r\n        data.orderViewer\r\n      );\r\n    }\r\n  }, [login]);\r\n\r\n  return { login, logout, token, userId, user, addProduct, orderViewer };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}