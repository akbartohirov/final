{"ast":null,"code":"import _regeneratorRuntime from\"/home/akbar/Desktop/project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/akbar/Desktop/project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/akbar/Desktop/project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/akbar/Desktop/project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/akbar/Desktop/project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from\"react\";import axios from\"axios\";import AuthContext from\"../Context/AuthContext\";import{useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Register=function Register(){var _useState=useState({name:\"\",email:\"\",phone:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),form=_useState2[0],setForm=_useState2[1];var auth=useContext(AuthContext);var history=useHistory();var onChangeHandler=function onChangeHandler(e){setForm(_objectSpread(_objectSpread({},form),{},_defineProperty({},e.target.name,e.target.value)));};var onRegister=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();console.log(form);_context.prev=2;_context.next=5;return axios.post(\"/auth/register\",form,{headers:{\"Conent-Type\":\"application/json\"}});case 5:user=_context.sent;window.M.toast({html:\"Ползователь создан\",classes:\"loginToast\"});auth.login(user.data.token,user.data.user._id);history.push(\"/\");_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](2);window.M.toast({html:\"Что то пошло не так\",classes:\"loginToastRed\"});case 14:case\"end\":return _context.stop();}}},_callee,null,[[2,11]]);}));return function onRegister(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"row mt-2\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"col s12 l4 m4\",style:{position:\"relative\",left:\"50%\",transform:\"translateX(-50%)\"},onSubmit:function onSubmit(e){return onRegister(e);},children:[/*#__PURE__*/_jsx(\"div\",{className:\"row col\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-field col s12\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return onChangeHandler(e);},id:\"name\",type:\"text\",name:\"name\",value:form.name,className:\"validate\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"\\u0418\\u0438\\u044F\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-field col s12\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return onChangeHandler(e);},id:\"email\",type:\"email\",name:\"email\",value:form.email,className:\"validate\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"\\u042D\\u043B\\u0435\\u043A\\u0442\\u0440\\u043E\\u043D\\u043D\\u0430\\u044F \\u043F\\u043E\\u0447\\u0442\\u0430\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-field col s12\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return onChangeHandler(e);},id:\"phone\",type:\"number\",name:\"phone\",value:form.phone,className:\"validate\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"phone\",children:\"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D \\u043D\\u043E\\u0438\\u0435\\u0440\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-field col s12\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return onChangeHandler(e);},id:\"password\",type:\"password\",name:\"password\",className:\"validate\",value:form.password}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"input-field col s12\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"waves-effect waves-light btn-large\",children:\"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"})})})]})});};export default Register;","map":{"version":3,"sources":["/home/akbar/Desktop/project/client/src/pages/Register.js"],"names":["React","useState","useContext","axios","AuthContext","useHistory","Register","name","email","phone","password","form","setForm","auth","history","onChangeHandler","e","target","value","onRegister","preventDefault","console","log","post","headers","user","window","M","toast","html","classes","login","data","token","_id","push","position","left","transform"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\r\nimport axios from \"axios\";\r\nimport AuthContext from \"../Context/AuthContext\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst Register = () => {\r\n  const [form, setForm] = useState({\r\n    name: \"\",\r\n    email: \"\",\r\n    phone: \"\",\r\n    password: \"\",\r\n  });\r\n\r\n  const auth = useContext(AuthContext);\r\n\r\n  const history = useHistory();\r\n\r\n  const onChangeHandler = (e) => {\r\n    setForm({\r\n      ...form,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const onRegister = async (e) => {\r\n    e.preventDefault();\r\n    console.log(form);\r\n    try {\r\n      const user = await axios.post(\"/auth/register\", form, {\r\n        headers: {\r\n          \"Conent-Type\": \"application/json\",\r\n        },\r\n      });\r\n      window.M.toast({ html: \"Ползователь создан\", classes: \"loginToast\" });\r\n      auth.login(user.data.token, user.data.user._id);\r\n      history.push(\"/\");\r\n    } catch (e) {\r\n      window.M.toast({ html: \"Что то пошло не так\", classes: \"loginToastRed\" });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"row mt-2\">\r\n      <form\r\n        className=\"col s12 l4 m4\"\r\n        style={{\r\n          position: \"relative\",\r\n          left: \"50%\",\r\n          transform: \"translateX(-50%)\",\r\n        }}\r\n        onSubmit={(e) => onRegister(e)}\r\n      >\r\n        <div className=\"row col\">\r\n          <h3>Регистрация</h3>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"input-field col s12\">\r\n            <input\r\n              onChange={(e) => onChangeHandler(e)}\r\n              id=\"name\"\r\n              type=\"text\"\r\n              name=\"name\"\r\n              value={form.name}\r\n              className=\"validate\"\r\n            />\r\n            <label htmlFor=\"name\">Иия</label>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"row\">\r\n          <div className=\"input-field col s12\">\r\n            <input\r\n              onChange={(e) => onChangeHandler(e)}\r\n              id=\"email\"\r\n              type=\"email\"\r\n              name=\"email\"\r\n              value={form.email}\r\n              className=\"validate\"\r\n            />\r\n            <label htmlFor=\"email\">Электронная почта</label>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"row\">\r\n          <div className=\"input-field col s12\">\r\n            <input\r\n              onChange={(e) => onChangeHandler(e)}\r\n              id=\"phone\"\r\n              type=\"number\"\r\n              name=\"phone\"\r\n              value={form.phone}\r\n              className=\"validate\"\r\n            />\r\n            <label htmlFor=\"phone\">Телефон ноиер</label>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"row\">\r\n          <div className=\"input-field col s12\">\r\n            <input\r\n              onChange={(e) => onChangeHandler(e)}\r\n              id=\"password\"\r\n              type=\"password\"\r\n              name=\"password\"\r\n              className=\"validate\"\r\n              value={form.password}\r\n            />\r\n            <label htmlFor=\"password\">Пароль</label>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"row\">\r\n          <div className=\"input-field col s12\">\r\n            <button\r\n              type=\"submit\"\r\n              className=\"waves-effect waves-light btn-large\"\r\n            >\r\n              Регистрация\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Register;\r\n"]},"metadata":{},"sourceType":"module"}