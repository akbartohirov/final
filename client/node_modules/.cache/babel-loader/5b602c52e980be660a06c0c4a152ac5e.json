{"ast":null,"code":"import _slicedToArray from\"/home/akbar/Desktop/akbarsfolder/project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";// import AdminSidebar from \"../../../Components/\";\nimport AdminSidebar from\"../../../Components/AdminSidebar\";import\"./AdminSubCategoryDetailsPage.css\";import axios from\"axios\";import{useParams}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AdminSubUserDetailsPage=function AdminSubUserDetailsPage(){var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),categories=_React$useState2[0],setCategories=_React$useState2[1];var _React$useState3=React.useState(\"\"),_React$useState4=_slicedToArray(_React$useState3,2),subCategoryName=_React$useState4[0],setSubCategoryName=_React$useState4[1];var _React$useState5=React.useState(\"\"),_React$useState6=_slicedToArray(_React$useState5,2),category=_React$useState6[0],setCategory=_React$useState6[1];var _React$useState7=React.useState(\"\"),_React$useState8=_slicedToArray(_React$useState7,2),img=_React$useState8[0],setImg=_React$useState8[1];var _useParams=useParams(),id=_useParams.id;React.useEffect(function(){var _JSON$parse=JSON.parse(localStorage.getItem(\"userData\")),token=_JSON$parse.token;axios.get(\"/subcategory/\".concat(id),{headers:{Authorization:\"Bearer \".concat(token)}}).then(function(_ref){var data=_ref.data;setSubCategoryName(data.subCategoryName);setCategory(data.category);setImg(data.img);});},[id]);React.useEffect(function(){axios.get(\"/category\",{}).then(function(_ref2){var data=_ref2.data;setCategories(data);});},[id]);var submitHanler=function submitHanler(e){var _JSON$parse2=JSON.parse(localStorage.getItem(\"userData\")),token=_JSON$parse2.token;e.preventDefault();var fd=new FormData();fd.append(\"subCategoryName\",subCategoryName);fd.append(\"img\",img);axios.patch(\"/subcategory/\".concat(id),fd,{headers:{\"Content-Type\":\"multipart/form-data\",Authorization:\"Bearer \".concat(token)}}).then(function(res){window.M.toast({html:\"Имзменения сохранени\",classes:\"loginToast\"});}).catch(function(e){window.M.toast({html:e.message,classes:\"loginToastRed\"});});};return/*#__PURE__*/_jsxs(\"div\",{className:\"adminPage\",children:[/*#__PURE__*/_jsx(AdminSidebar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"adminUsersDetailsPage\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"center-align\",children:\"\\u041F\\u043E\\u0434\\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"col m6 offset-m3\",onSubmit:function onSubmit(e){return submitHanler(e);},children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"input-field col s12\",children:/*#__PURE__*/_jsxs(\"select\",{value:category,onChange:function onChange(e){return setCategory(e.target.value);},className:\"browser-default\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,children:\"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"}),categories.length>0&&categories.map(function(el){return/*#__PURE__*/_jsx(\"option\",{value:el._categoryName,children:el.categoryName},el._id);})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-field col s12\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"categoryName\",type:\"text\",required:true,className:\"validate\",value:subCategoryName,onChange:function onChange(e){return setSubCategoryName(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"categoryName\",children:\"\\u041F\\u043E\\u0434\\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"file-field input-field col s12\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"btn\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u0418\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",required:true,onChange:function onChange(e){return setImg(e.target.files[0]);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"file-path-wrapper\",children:/*#__PURE__*/_jsx(\"input\",{className:\"file-path validate\",type:\"text\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"input-field col s12\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",type:\"submit\",children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"})})})]})})]})]});};export default AdminSubUserDetailsPage;","map":{"version":3,"sources":["/home/akbar/Desktop/akbarsfolder/project/client/src/pages/adminpages/admindetailspage/AdminSubCategoryDetailsPage.js"],"names":["React","AdminSidebar","axios","useParams","AdminSubUserDetailsPage","useState","categories","setCategories","subCategoryName","setSubCategoryName","category","setCategory","img","setImg","id","useEffect","JSON","parse","localStorage","getItem","token","get","headers","Authorization","then","data","submitHanler","e","preventDefault","fd","FormData","append","patch","res","window","M","toast","html","classes","catch","message","target","value","length","map","el","_categoryName","categoryName","_id","files"],"mappings":"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","sourcesContent":["import React from \"react\";\n// import AdminSidebar from \"../../../Components/\";\nimport AdminSidebar from \"../../../Components/AdminSidebar\";\nimport \"./AdminSubCategoryDetailsPage.css\";\nimport axios from \"axios\";\nimport { useParams } from \"react-router-dom\";\n\nconst AdminSubUserDetailsPage = () => {\n  const [categories, setCategories] = React.useState([]);\n  const [subCategoryName, setSubCategoryName] = React.useState(\"\");\n  const [category, setCategory] = React.useState(\"\");\n  const [img, setImg] = React.useState(\"\");\n  const { id } = useParams();\n\n  React.useEffect(() => {\n    const { token } = JSON.parse(localStorage.getItem(\"userData\"));\n\n    axios\n      .get(`/subcategory/${id}`, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n      .then(({ data }) => {\n        setSubCategoryName(data.subCategoryName);\n        setCategory(data.category);\n        setImg(data.img);\n      });\n  }, [id]);\n\n  React.useEffect(() => {\n    axios.get(`/category`, {}).then(({ data }) => {\n      setCategories(data);\n    });\n  }, [id]);\n\n  const submitHanler = (e) => {\n    const { token } = JSON.parse(localStorage.getItem(\"userData\"));\n\n    e.preventDefault();\n\n    const fd = new FormData();\n    fd.append(\"subCategoryName\", subCategoryName);\n    fd.append(\"img\", img);\n\n    axios\n      .patch(`/subcategory/${id}`, fd, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n          Authorization: `Bearer ${token}`,\n        },\n      })\n      .then((res) => {\n        window.M.toast({ html: \"Имзменения сохранени\", classes: \"loginToast\" });\n      })\n      .catch((e) => {\n        window.M.toast({ html: e.message, classes: \"loginToastRed\" });\n      });\n  };\n\n  return (\n    <div className=\"adminPage\">\n      <AdminSidebar />\n      <div className=\"adminUsersDetailsPage\">\n        <h4 className=\"center-align\">Подкатегория</h4>\n        <div className=\"row\">\n          <form className=\"col m6 offset-m3\" onSubmit={(e) => submitHanler(e)}>\n            <div className=\"row\">\n              <div className=\"input-field col s12\">\n                <select\n                  value={category}\n                  onChange={(e) => setCategory(e.target.value)}\n                  className=\"browser-default\"\n                >\n                  <option value=\"\" disabled>\n                    Категория\n                  </option>\n                  {categories.length > 0 &&\n                    categories.map((el) => (\n                      <option key={el._id} value={el._categoryName}>\n                        {el.categoryName}\n                      </option>\n                    ))}\n                </select>\n              </div>\n            </div>\n\n            <div className=\"row\">\n              <div className=\"input-field col s12\">\n                <input\n                  id=\"categoryName\"\n                  type=\"text\"\n                  required\n                  className=\"validate\"\n                  value={subCategoryName}\n                  onChange={(e) => setSubCategoryName(e.target.value)}\n                />\n                <label htmlFor=\"categoryName\">Подкатегория</label>\n              </div>\n            </div>\n\n            <div className=\"row\">\n              <div className=\"file-field input-field col s12\">\n                <div className=\"btn\">\n                  <span>Изображения</span>\n                  <input\n                    type=\"file\"\n                    required\n                    onChange={(e) => setImg(e.target.files[0])}\n                  />\n                </div>\n                <div className=\"file-path-wrapper\">\n                  <input className=\"file-path validate\" type=\"text\" />\n                </div>\n              </div>\n            </div>\n\n            <div className=\"row\">\n              <div className=\"input-field col s12\">\n                <button className=\"btn\" type=\"submit\">\n                  Сохранить\n                </button>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AdminSubUserDetailsPage;\n"]},"metadata":{},"sourceType":"module"}