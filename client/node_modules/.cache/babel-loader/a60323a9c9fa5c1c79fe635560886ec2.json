{"ast":null,"code":"import _slicedToArray from\"/home/akbar/Desktop/akbarsfolder/project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import AdminSidebar from\"../../Components/AdminSidebar\";import\"./AdminUsersPage.css\";import axios from\"axios\";import Loading from\"../../Components/Loading/Loading\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AdminBrandsPage=function AdminBrandsPage(){var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),banner=_React$useState2[0],setBanner=_React$useState2[1];var _React$useState3=React.useState(\"\"),_React$useState4=_slicedToArray(_React$useState3,2),changed=_React$useState4[0],setChanged=_React$useState4[1];var _React$useState5=React.useState([]),_React$useState6=_slicedToArray(_React$useState5,2),img=_React$useState6[0],setImg=_React$useState6[1];React.useEffect(function(){axios.get(\"/banner\").then(function(res){return setBanner(res.data);});},[changed]);var submitHanler=function submitHanler(e){e.preventDefault();var _JSON$parse=JSON.parse(localStorage.getItem(\"userData\")),token=_JSON$parse.token;var fd=new FormData();fd.append(\"img\",img);axios.patch(\"/banner/\".concat(banner.length&&banner[0]._id),fd,{headers:{\"Content-Type\":\"multipart/form-data\",Authorization:\"Bearer \".concat(token)}}).then(function(res){setChanged(res.data.brandName+Date.now());window.M.toast({html:\"Изменение созранено\",classes:\"loginToast\"});}).catch(function(e){window.M.toast({html:e.message,classes:\"loginTostRed\"});});};return/*#__PURE__*/_jsxs(\"div\",{className:\"adminPage\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"modal1\",className:\"modal modal-fixed-footer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"C\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u0411\\u0440\\u0435\\u043D\\u0434\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"col m6 offset-m3\",style:{padding:\"0 2rem\"},onSubmit:function onSubmit(e){return submitHanler(e);},children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"file-field input-field col s12\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"btn\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u0418\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",required:true,onChange:function onChange(e){return setImg(e.target.files[0]);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"file-path-wrapper\",children:/*#__PURE__*/_jsx(\"input\",{className:\"file-path validate\",type:\"text\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"input-field col s12\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn waves-effect waves-green green btn-flat\",type:\"submit\",children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"})})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-footer\"})]}),/*#__PURE__*/_jsx(AdminSidebar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"adminUsersPage\",children:[/*#__PURE__*/_jsxs(\"table\",{className:\"striped\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\u0418\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:banner.length>0&&banner.map(function(brand,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"img\",{height:\"200px\",src:\"/\".concat(brand.img.path),alt:brand.img.filename})}),/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"button\",{\"data-target\":\"modal1\",className:\"btn modal-trigger yellow accent-4 waves-effect waves-light\",onClick:function onClick(e){var elem=document.querySelectorAll(\".modal\");window.M.Modal.init(elem);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})})})]},index+1);})})]}),banner.length===0&&/*#__PURE__*/_jsx(Loading,{})]})]});};export default AdminBrandsPage;","map":{"version":3,"sources":["/home/akbar/Desktop/akbarsfolder/project/client/src/pages/adminpages/AdminBannerPage.js"],"names":["React","AdminSidebar","axios","Loading","AdminBrandsPage","useState","banner","setBanner","changed","setChanged","img","setImg","useEffect","get","then","res","data","submitHanler","e","preventDefault","JSON","parse","localStorage","getItem","token","fd","FormData","append","patch","length","_id","headers","Authorization","brandName","Date","now","window","M","toast","html","classes","catch","message","padding","target","files","map","brand","index","path","filename","elem","document","querySelectorAll","Modal","init"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport AdminSidebar from \"../../Components/AdminSidebar\";\nimport \"./AdminUsersPage.css\";\nimport axios from \"axios\";\nimport Loading from \"../../Components/Loading/Loading\";\n\nconst AdminBrandsPage = () => {\n  const [banner, setBanner] = React.useState([]);\n  const [changed, setChanged] = React.useState(\"\");\n  const [img, setImg] = React.useState([]);\n\n  React.useEffect(() => {\n    axios.get(\"/banner\").then((res) => setBanner(res.data));\n  }, [changed]);\n\n  const submitHanler = (e) => {\n    e.preventDefault();\n    const { token } = JSON.parse(localStorage.getItem(\"userData\"));\n\n    const fd = new FormData();\n\n    fd.append(\"img\", img);\n\n    axios\n      .patch(`/banner/${banner.length && banner[0]._id}`, fd, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n          Authorization: `Bearer ${token}`,\n        },\n      })\n      .then((res) => {\n        setChanged(res.data.brandName + Date.now());\n        window.M.toast({ html: \"Изменение созранено\", classes: \"loginToast\" });\n      })\n      .catch((e) => {\n        window.M.toast({ html: e.message, classes: \"loginTostRed\" });\n      });\n  };\n\n  return (\n    <div className=\"adminPage\">\n      <div id=\"modal1\" className=\"modal modal-fixed-footer\">\n        <div className=\"modal-content\">\n          <h4>Cоздать Бренд</h4>\n          <form\n            className=\"col m6 offset-m3\"\n            style={{ padding: \"0 2rem\" }}\n            onSubmit={(e) => submitHanler(e)}\n          >\n            <div className=\"row\">\n              <div className=\"file-field input-field col s12\">\n                <div className=\"btn\">\n                  <span>Изображения</span>\n                  <input\n                    type=\"file\"\n                    required\n                    onChange={(e) => setImg(e.target.files[0])}\n                  />\n                </div>\n                <div className=\"file-path-wrapper\">\n                  <input className=\"file-path validate\" type=\"text\" />\n                </div>\n              </div>\n            </div>\n\n            <div className=\"row\">\n              <div className=\"input-field col s12\">\n                <button\n                  className=\"btn waves-effect waves-green green btn-flat\"\n                  type=\"submit\"\n                >\n                  Сохранить\n                </button>\n              </div>\n            </div>\n          </form>\n        </div>\n        <div className=\"modal-footer\"></div>\n      </div>\n      <AdminSidebar />\n      <div className=\"adminUsersPage\">\n        <table className=\"striped\">\n          <thead>\n            <tr>\n              <th>Изображение</th>\n              <th>Изменить</th>\n            </tr>\n          </thead>\n          <tbody>\n            {banner.length > 0 &&\n              banner.map((brand, index) => (\n                <tr key={index + 1}>\n                  <th>\n                    <img\n                      height=\"200px\"\n                      src={`/${brand.img.path}`}\n                      alt={brand.img.filename}\n                    />\n                  </th>\n                  <th>\n                    <button\n                      data-target=\"modal1\"\n                      className=\"btn modal-trigger yellow accent-4 waves-effect waves-light\"\n                      onClick={(e) => {\n                        const elem = document.querySelectorAll(\".modal\");\n                        window.M.Modal.init(elem);\n                      }}\n                    >\n                      <i className=\"fas fa-edit\"></i>\n                    </button>\n                  </th>\n                </tr>\n              ))}\n          </tbody>\n        </table>\n        {banner.length === 0 && <Loading />}\n      </div>\n    </div>\n  );\n};\n\nexport default AdminBrandsPage;\n"]},"metadata":{},"sourceType":"module"}