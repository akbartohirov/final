{"ast":null,"code":"import _slicedToArray from\"/home/akbar/Desktop/akbarsfolder/project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";// import AdminSidebar from \"../../../Components/\";\nimport AdminSidebar from\"../../../Components/AdminSidebar\";import\"./AdminCategoryDetailsPage.css\";import axios from\"axios\";import{useParams}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AdminUserDetailsPage=function AdminUserDetailsPage(){var _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),name=_React$useState2[0],setName=_React$useState2[1];var _React$useState3=React.useState(\"\"),_React$useState4=_slicedToArray(_React$useState3,2),img=_React$useState4[0],setImg=_React$useState4[1];var _useParams=useParams(),id=_useParams.id;React.useEffect(function(){var _JSON$parse=JSON.parse(localStorage.getItem(\"userData\")),token=_JSON$parse.token;axios.get(\"/category/\".concat(id),{headers:{Authorization:\"Bearer \".concat(token)}}).then(function(_ref){var data=_ref.data;setName(data.categoryName);setImg(data.img);});},[id]);var submitHanler=function submitHanler(e){var _JSON$parse2=JSON.parse(localStorage.getItem(\"userData\")),token=_JSON$parse2.token;e.preventDefault();var fd=new FormData();fd.append(\"categoryName\",name);fd.append(\"img\",img);axios.patch(\"/category/\".concat(id),fd,{headers:{\"Content-Type\":\"multipart/form-data\",Authorization:\"Bearer \".concat(token)}}).then(function(res){window.M.toast({html:\"Имзменения сохранени\",classes:\"loginToast\"});}).catch(function(e){window.M.toast({html:e.message,classes:\"loginToastRed\"});});};return/*#__PURE__*/_jsxs(\"div\",{className:\"adminPage\",children:[/*#__PURE__*/_jsx(AdminSidebar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"adminUsersDetailsPage\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"center-align\",children:\"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"col m6 offset-m3\",onSubmit:function onSubmit(e){return submitHanler(e);},children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-field col s12\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"name\",type:\"text\",className:\"validate\",value:name,onChange:function onChange(e){return setName(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"file-field input-field col s12\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"btn\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u0418\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",required:true,multiple:true,onChange:function onChange(e){return setImg(e.target.files[0]);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"file-path-wrapper\",children:/*#__PURE__*/_jsx(\"input\",{className:\"file-path validate\",type:\"text\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"input-field col s12\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",type:\"submit\",children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"})})})]})})]})]});};export default AdminUserDetailsPage;","map":{"version":3,"sources":["/home/akbar/Desktop/akbarsfolder/project/client/src/pages/adminpages/admindetailspage/AdminCategoryDetailsPage.js"],"names":["React","AdminSidebar","axios","useParams","AdminUserDetailsPage","useState","name","setName","img","setImg","id","useEffect","JSON","parse","localStorage","getItem","token","get","headers","Authorization","then","data","categoryName","submitHanler","e","preventDefault","fd","FormData","append","patch","res","window","M","toast","html","classes","catch","message","target","value","files"],"mappings":"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","sourcesContent":["import React from \"react\";\n// import AdminSidebar from \"../../../Components/\";\nimport AdminSidebar from \"../../../Components/AdminSidebar\";\nimport \"./AdminCategoryDetailsPage.css\";\nimport axios from \"axios\";\nimport { useParams } from \"react-router-dom\";\n\nconst AdminUserDetailsPage = () => {\n  const [name, setName] = React.useState(\"\");\n  const [img, setImg] = React.useState(\"\");\n  const { id } = useParams();\n\n  React.useEffect(() => {\n    const { token } = JSON.parse(localStorage.getItem(\"userData\"));\n\n    axios\n      .get(`/category/${id}`, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n      .then(({ data }) => {\n        setName(data.categoryName);\n        setImg(data.img);\n      });\n  }, [id]);\n\n  const submitHanler = (e) => {\n    const { token } = JSON.parse(localStorage.getItem(\"userData\"));\n\n    e.preventDefault();\n\n    const fd = new FormData();\n    fd.append(\"categoryName\", name);\n    fd.append(\"img\", img);\n\n    axios\n      .patch(`/category/${id}`, fd, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n          Authorization: `Bearer ${token}`,\n        },\n      })\n      .then((res) => {\n        window.M.toast({ html: \"Имзменения сохранени\", classes: \"loginToast\" });\n      })\n      .catch((e) => {\n        window.M.toast({ html: e.message, classes: \"loginToastRed\" });\n      });\n  };\n\n  return (\n    <div className=\"adminPage\">\n      <AdminSidebar />\n      <div className=\"adminUsersDetailsPage\">\n        <h4 className=\"center-align\">Категория</h4>\n        <div className=\"row\">\n          <form className=\"col m6 offset-m3\" onSubmit={(e) => submitHanler(e)}>\n            <div className=\"row\">\n              <div className=\"input-field col s12\">\n                <input\n                  id=\"name\"\n                  type=\"text\"\n                  className=\"validate\"\n                  value={name}\n                  onChange={(e) => setName(e.target.value)}\n                />\n                <label htmlFor=\"name\">Категория</label>\n              </div>\n            </div>\n            <div className=\"row\">\n              <div className=\"file-field input-field col s12\">\n                <div className=\"btn\">\n                  <span>Изображения</span>\n                  <input\n                    type=\"file\"\n                    required\n                    multiple\n                    onChange={(e) => setImg(e.target.files[0])}\n                  />\n                </div>\n                <div className=\"file-path-wrapper\">\n                  <input className=\"file-path validate\" type=\"text\" />\n                </div>\n              </div>\n            </div>\n\n            <div className=\"row\">\n              <div className=\"input-field col s12\">\n                <button className=\"btn\" type=\"submit\">\n                  Сохранить\n                </button>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AdminUserDetailsPage;\n"]},"metadata":{},"sourceType":"module"}