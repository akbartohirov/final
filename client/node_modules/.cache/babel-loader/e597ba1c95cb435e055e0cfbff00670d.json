{"ast":null,"code":"import _regeneratorRuntime from\"/home/akbar/Desktop/salam/final/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/akbar/Desktop/salam/final/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/akbar/Desktop/salam/final/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/akbar/Desktop/salam/final/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/akbar/Desktop/salam/final/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from\"react\";import AuthContext from\"../../Context/AuthContext\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ChangeUserData=function ChangeUserData(_ref){var userData=_ref.userData;var auth=useContext(AuthContext);var _useState=useState({name:userData.name,email:userData.email,phone:userData.phone}),_useState2=_slicedToArray(_useState,2),userFormData=_useState2[0],setUserFormData=_useState2[1];var _onChange=function onChange(e){setUserFormData(_objectSpread(_objectSpread({},userFormData),{},_defineProperty({},e.target.name,e.target.value)));};var onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.prev=1;_context.next=4;return axios.patch(\"/users/\".concat(auth.userId),userFormData,{headers:{\"Content-Type\":\"application/json\",Authorization:auth.token}});case 4:window.M.toast({html:\"Успешно сохранен\",classes:\"loginToast\"});_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](1);window.M.toast({html:\"Что то пошло не так\",classes:\"loginToastRed\"});case 10:window.location.reload();case 11:case\"end\":return _context.stop();}}},_callee,null,[[1,7]]);}));return function onSubmit(_x){return _ref2.apply(this,arguments);};}();window.M.updateTextFields();return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u0414\\u0430\\u043D\\u043D\\u044B\\u0435\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"col s12\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-field col s12\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return _onChange(e);},id:\"name\",type:\"text\",name:\"name\",className:\"validate\",value:userFormData.name}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name\",children:\"\\u0418\\u043C\\u044F\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-field col s12\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return _onChange(e);},id:\"email\",type:\"email\",name:\"email\",className:\"validate\",value:userFormData.email}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"\\u042D\\u043B\\u0435\\u043A\\u0442\\u0440\\u043E\\u043D \\u043F\\u043E\\u0447\\u0442\\u0430\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-field col s12\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:function onChange(e){return _onChange(e);},name:\"phone\",id:\"tel\",type:\"tel\",className:\"validate\",value:userFormData.phone}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"tel\",children:\"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D \\u043D\\u043E\\u043C\\u0435\\u0440\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"input-field col s12\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/dashboard\",onClick:function onClick(e){return onSubmit(e);},type:\"submit\",className:\"waves-effect waves-light btn-large\",children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"})})})]})})]});};export default ChangeUserData;","map":{"version":3,"sources":["/home/akbar/Desktop/salam/final/client/src/Components/Dashboard/ChangeUserData.js"],"names":["React","useState","useContext","AuthContext","axios","ChangeUserData","userData","auth","name","email","phone","userFormData","setUserFormData","onChange","e","target","value","onSubmit","preventDefault","patch","userId","headers","Authorization","token","window","M","toast","html","classes","location","reload","updateTextFields"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\r\nimport AuthContext from \"../../Context/AuthContext\";\r\nimport axios from \"axios\";\r\n\r\nconst ChangeUserData = ({ userData }) => {\r\n  const auth = useContext(AuthContext);\r\n\r\n  const [userFormData, setUserFormData] = useState({\r\n    name: userData.name,\r\n    email: userData.email,\r\n    phone: userData.phone,\r\n  });\r\n\r\n  const onChange = (e) => {\r\n    setUserFormData({ ...userFormData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      await axios.patch(`/users/${auth.userId}`, userFormData, {\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          Authorization: auth.token,\r\n        },\r\n      });\r\n      window.M.toast({ html: \"Успешно сохранен\", classes: \"loginToast\" });\r\n    } catch (e) {\r\n      window.M.toast({ html: \"Что то пошло не так\", classes: \"loginToastRed\" });\r\n    }\r\n    window.location.reload();\r\n  };\r\n\r\n  window.M.updateTextFields();\r\n\r\n  return (\r\n    <div>\r\n      <h3>Изменить Данные</h3>\r\n\r\n      <div className=\"row\">\r\n        <form className=\"col s12\">\r\n          <div className=\"row\">\r\n            <div className=\"input-field col s12\">\r\n              <input\r\n                onChange={(e) => onChange(e)}\r\n                id=\"name\"\r\n                type=\"text\"\r\n                name=\"name\"\r\n                className=\"validate\"\r\n                value={userFormData.name}\r\n              />\r\n              <label htmlFor=\"name\">Имя</label>\r\n            </div>\r\n          </div>\r\n          <div className=\"row\">\r\n            <div className=\"input-field col s12\">\r\n              <input\r\n                onChange={(e) => onChange(e)}\r\n                id=\"email\"\r\n                type=\"email\"\r\n                name=\"email\"\r\n                className=\"validate\"\r\n                value={userFormData.email}\r\n              />\r\n              <label htmlFor=\"email\">Электрон почта</label>\r\n            </div>\r\n          </div>\r\n          <div className=\"row\">\r\n            <div className=\"input-field col s12\">\r\n              <input\r\n                onChange={(e) => onChange(e)}\r\n                name=\"phone\"\r\n                id=\"tel\"\r\n                type=\"tel\"\r\n                className=\"validate\"\r\n                value={userFormData.phone}\r\n              />\r\n              <label htmlFor=\"tel\">Телефон номер</label>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"row\">\r\n            <div className=\"input-field col s12\">\r\n              <a\r\n                href=\"/dashboard\"\r\n                onClick={(e) => onSubmit(e)}\r\n                type=\"submit\"\r\n                className=\"waves-effect waves-light btn-large\"\r\n              >\r\n                Сохранить\r\n              </a>\r\n            </div>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChangeUserData;\r\n"]},"metadata":{},"sourceType":"module"}