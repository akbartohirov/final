{"ast":null,"code":"import _regeneratorRuntime from\"/home/akbar/Desktop/salam/final/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/akbar/Desktop/salam/final/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/akbar/Desktop/salam/final/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import AdminSidebar from\"../../Components/AdminSidebar\";import\"./AdminUsersPage.css\";import axios from\"axios\";import Loading from\"../../Components/Loading/Loading\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AdminUsersPage=function AdminUsersPage(){var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),users=_React$useState2[0],setUsers=_React$useState2[1];var _React$useState3=React.useState(\"\"),_React$useState4=_slicedToArray(_React$useState3,2),error=_React$useState4[0],setError=_React$useState4[1];var _React$useState5=React.useState(\"\"),_React$useState6=_slicedToArray(_React$useState5,2),deleted=_React$useState6[0],setDeleted=_React$useState6[1];var deleteHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e,id){var _JSON$parse,token,_yield$axios$delete,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_JSON$parse=JSON.parse(localStorage.getItem(\"userData\")),token=_JSON$parse.token;_context.prev=1;if(!window.confirm(\"Вы увепены?\")){_context.next=9;break;}_context.next=5;return axios.delete(\"/users/\".concat(id),{headers:{Authorization:\"Bearer \".concat(token)}});case 5:_yield$axios$delete=_context.sent;data=_yield$axios$delete.data;window.M.toast({html:\"Ползователь удален\",classes:\"loginToast\"});setDeleted(data.msg);case 9:_context.next=15;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](1);window.M.toast({html:_context.t0.message,classes:\"loginToastRed\"});return _context.abrupt(\"return\");case 15:case\"end\":return _context.stop();}}},_callee,null,[[1,11]]);}));return function deleteHandler(_x,_x2){return _ref.apply(this,arguments);};}();React.useEffect(function(){var _JSON$parse2=JSON.parse(localStorage.getItem(\"userData\")),token=_JSON$parse2.token;axios.get(\"/users\",{headers:{Authorization:\"Bearer \".concat(token)}}).then(function(_ref2){var data=_ref2.data;setUsers(data);}).catch(function(e){setError(e.message);});setDeleted(\"\");},[deleted]);return/*#__PURE__*/_jsxs(\"div\",{className:\"adminPage\",children:[/*#__PURE__*/_jsx(AdminSidebar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"adminUsersPage\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"adminUserPageTitle\",children:\"\\u0412\\u0441\\u0435 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u0438\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"striped\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\u2116\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0418\\u043C\\u044F\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0415\\u043B\\u0435\\u043A\\u0442\\u0440\\u043E\\u043D\\u043D\\u0430\\u044F \\u043F\\u043E\\u0447\\u0442\\u0430\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D \\u043D\\u043E\\u0438\\u0435\\u0440\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0413\\u043B\\u0430\\u0432\\u043D\\u044B\\u0439 \\u0430\\u0434\\u043C\\u0438\\u043D\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0410\\u0434\\u043C\\u0438\\u043D 1\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0410\\u0434\\u043C\\u0438\\u043D 2\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0421\\u043E\\u0437\\u0434\\u0430\\u043D\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.length>0&&users.map(function(user,index){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:index+1}),/*#__PURE__*/_jsx(\"th\",{children:user.name}),/*#__PURE__*/_jsx(\"th\",{children:user.email}),/*#__PURE__*/_jsx(\"th\",{children:user.phone}),/*#__PURE__*/_jsx(\"th\",{children:user.isAdmin?/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check success light-green-text accent-3-text\"}):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times deep-orange-text darken-1-text\"})}),/*#__PURE__*/_jsx(\"th\",{children:user.isAdminAddProduct?/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check success light-green-text accent-3-text\"}):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times deep-orange-text darken-1-text\"})}),/*#__PURE__*/_jsx(\"th\",{children:user.isAdminOrderViewer?/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check success light-green-text accent-3-text\"}):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times deep-orange-text darken-1-text\"})}),/*#__PURE__*/_jsx(\"th\",{children:new Date(user.createdAt).toDateString()}),/*#__PURE__*/_jsxs(\"th\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/admin/users/\".concat(user._id),className:\"btn yellow accent-4 waves-effect waves-light\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"})}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return deleteHandler(e,user._id);},className:\"btn deep-orange darken-1 waves-effect waves-light\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})]})]},index+1);})})]}),users.length===0&&!error?/*#__PURE__*/_jsx(Loading,{}):/*#__PURE__*/_jsx(\"span\",{className:\"red-text\",children:error})]})]});};export default AdminUsersPage;","map":{"version":3,"sources":["/home/akbar/Desktop/salam/final/client/src/pages/adminpages/AdminUsersPage.js"],"names":["React","AdminSidebar","axios","Loading","Link","AdminUsersPage","useState","users","setUsers","error","setError","deleted","setDeleted","deleteHandler","e","id","JSON","parse","localStorage","getItem","token","window","confirm","delete","headers","Authorization","data","M","toast","html","classes","msg","message","useEffect","get","then","catch","length","map","user","index","name","email","phone","isAdmin","isAdminAddProduct","isAdminOrderViewer","Date","createdAt","toDateString","_id"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport AdminSidebar from \"../../Components/AdminSidebar\";\nimport \"./AdminUsersPage.css\";\nimport axios from \"axios\";\nimport Loading from \"../../Components/Loading/Loading\";\nimport { Link } from \"react-router-dom\";\n\nconst AdminUsersPage = () => {\n  const [users, setUsers] = React.useState([]);\n  const [error, setError] = React.useState(\"\");\n  const [deleted, setDeleted] = React.useState(\"\");\n\n  const deleteHandler = async (e, id) => {\n    const { token } = JSON.parse(localStorage.getItem(\"userData\"));\n\n    try {\n      if (window.confirm(\"Вы увепены?\")) {\n        const { data } = await axios.delete(`/users/${id}`, {\n          headers: { Authorization: `Bearer ${token}` },\n        });\n        window.M.toast({\n          html: \"Ползователь удален\",\n          classes: \"loginToast\",\n        });\n        setDeleted(data.msg);\n      }\n    } catch (e) {\n      window.M.toast({ html: e.message, classes: \"loginToastRed\" });\n      return;\n    }\n  };\n\n  React.useEffect(() => {\n    const { token } = JSON.parse(localStorage.getItem(\"userData\"));\n\n    axios\n      .get(\"/users\", {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n      .then(({ data }) => {\n        setUsers(data);\n      })\n      .catch((e) => {\n        setError(e.message);\n      });\n    setDeleted(\"\");\n  }, [deleted]);\n\n  return (\n    <div className=\"adminPage\">\n      <AdminSidebar />\n      <div className=\"adminUsersPage\">\n        <p className=\"adminUserPageTitle\">Все пользователи</p>\n\n        <table className=\"striped\">\n          <thead>\n            <tr>\n              <th>№</th>\n              <th>Имя</th>\n              <th>Електронная почта</th>\n              <th>Телефон ноиер</th>\n              <th>Главный админ</th>\n              <th>Админ 1</th>\n              <th>Админ 2</th>\n              <th>Создан</th>\n              <th></th>\n            </tr>\n          </thead>\n\n          <tbody>\n            {users.length > 0 &&\n              users.map((user, index) => (\n                <tr key={index + 1}>\n                  <th>{index + 1}</th>\n                  <th>{user.name}</th>\n                  <th>{user.email}</th>\n                  <th>{user.phone}</th>\n                  <th>\n                    {user.isAdmin ? (\n                      <i className=\"fas fa-check success light-green-text accent-3-text\"></i>\n                    ) : (\n                      <i className=\"fas fa-times deep-orange-text darken-1-text\"></i>\n                    )}\n                  </th>\n\n                  <th>\n                    {user.isAdminAddProduct ? (\n                      <i className=\"fas fa-check success light-green-text accent-3-text\"></i>\n                    ) : (\n                      <i className=\"fas fa-times deep-orange-text darken-1-text\"></i>\n                    )}\n                  </th>\n\n                  <th>\n                    {user.isAdminOrderViewer ? (\n                      <i className=\"fas fa-check success light-green-text accent-3-text\"></i>\n                    ) : (\n                      <i className=\"fas fa-times deep-orange-text darken-1-text\"></i>\n                    )}\n                  </th>\n                  <th>{new Date(user.createdAt).toDateString()}</th>\n                  <th>\n                    <Link\n                      to={`/admin/users/${user._id}`}\n                      className=\"btn yellow accent-4 waves-effect waves-light\"\n                    >\n                      <i className=\"fas fa-edit\"></i>\n                    </Link>\n                    <button\n                      onClick={(e) => deleteHandler(e, user._id)}\n                      className=\"btn deep-orange darken-1 waves-effect waves-light\"\n                    >\n                      <i className=\"fas fa-trash\"></i>\n                    </button>\n                  </th>\n                </tr>\n              ))}\n          </tbody>\n        </table>\n        {users.length === 0 && !error ? (\n          <Loading />\n        ) : (\n          <span className=\"red-text\">{error}</span>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default AdminUsersPage;\n"]},"metadata":{},"sourceType":"module"}