{"ast":null,"code":"import _slicedToArray from\"/home/akbar/Desktop/salam/final/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from\"axios\";import React from\"react\";import{useParams,useHistory}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Ordered=function Ordered(){var _React$useState=React.useState({}),_React$useState2=_slicedToArray(_React$useState,2),order=_React$useState2[0],setOrder=_React$useState2[1];var _React$useState3=React.useState({}),_React$useState4=_slicedToArray(_React$useState3,2),error=_React$useState4[0],setError=_React$useState4[1];var _useParams=useParams(),id=_useParams.id;var history=useHistory();React.useEffect(function(){var _JSON$parse=JSON.parse(localStorage.getItem(\"userData\")),token=_JSON$parse.token;axios.get(\"/orders/exact/\".concat(id),{headers:{Authorization:\"Bearer \".concat(token)}}).then(function(res){console.log(res.data);setOrder(res.data);window.M.updateTextFields();}).catch(function(e){console.log(e);setError(e);});},[id]);var _onSubmit=function onSubmit(e){e.preventDefault();axios.post(\"https://checkout.paycom.uz/api\",{},{headers:{Authorization:\"X-Auth \"}}).then(function(res){return console.log(res.data);});};var cencelOrder=function cencelOrder(e,id){e.preventDefault();var _JSON$parse2=JSON.parse(localStorage.getItem(\"userData\")),token=_JSON$parse2.token;axios.delete(\"/orders/\".concat(id),{headers:{Authorization:\"Bearer \".concat(token)}}).then(function(res){window.M.toast({html:\"Заказ успешно отменен\",classes:\"loginToast\"});history.push(\"/basket\");}).catch(function(e){window.M.toast({html:\"Что прошло не так\",classes:\"loginToastRed\"});});};return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:function onSubmit(e){return _onSubmit(e);},className:\"payme card\",style:{maxWidth:\"700px\",margin:\"50px auto\",padding:\"30px\"},children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://cdn.paycom.uz/documentation_assets/power-by-Payme.svg\",alt:\"payme\",style:{height:\"80px\",margin:\"0 auto\"}}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-field col s12\",children:[/*#__PURE__*/_jsx(\"input\",{required:true,disabled:true,value:order.phone&&order.products.map(function(product){return product.quantity*product.price;}).reduce(function(acc,item){return acc+item;}),id:\"number\",min:1000,type:\"number\",className:\"validate\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"number\",children:\"\\u0418\\u0442\\u043E\\u0433\\u043E\\u0432\\u0430\\u044F \\u0441\\u0443\\u043C\\u043C\\u0430 \\u0432\\u0430\\u0448\\u0435\\u0433\\u043E \\u0437\\u0430\\u043A\\u0430\\u0437\\u0430\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn mr-1 mb-1 green waves-effect\",children:\"\\u041E\\u043F\\u043B\\u0430\\u0442\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(e){return cencelOrder(e,id);},type:\"reset\",className:\"btn mb-1 red waves-effect\",children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u0437\\u0430\\u043A\\u0430\\u0437\"})]})]})});};export default Ordered;","map":{"version":3,"sources":["/home/akbar/Desktop/salam/final/client/src/pages/Ordered.js"],"names":["axios","React","useParams","useHistory","Ordered","useState","order","setOrder","error","setError","id","history","useEffect","JSON","parse","localStorage","getItem","token","get","headers","Authorization","then","res","console","log","data","window","M","updateTextFields","catch","e","onSubmit","preventDefault","post","cencelOrder","delete","toast","html","classes","push","maxWidth","margin","padding","height","phone","products","map","product","quantity","price","reduce","acc","item"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport React from \"react\";\nimport { useParams, useHistory } from \"react-router-dom\";\n\nconst Ordered = () => {\n  const [order, setOrder] = React.useState({});\n  const [error, setError] = React.useState({});\n  const { id } = useParams();\n\n  const history = useHistory();\n\n  React.useEffect(() => {\n    const { token } = JSON.parse(localStorage.getItem(\"userData\"));\n\n    axios\n      .get(`/orders/exact/${id}`, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n      .then((res) => {\n        console.log(res.data);\n        setOrder(res.data);\n        window.M.updateTextFields();\n      })\n      .catch((e) => {\n        console.log(e);\n        setError(e);\n      });\n  }, [id]);\n\n  const onSubmit = (e) => {\n    e.preventDefault();\n\n    axios\n      .post(\n        `https://checkout.paycom.uz/api`,\n        {},\n        {\n          headers: {\n            Authorization: `X-Auth `,\n          },\n        }\n      )\n      .then((res) => console.log(res.data));\n  };\n\n  const cencelOrder = (e, id) => {\n    e.preventDefault();\n    const { token } = JSON.parse(localStorage.getItem(\"userData\"));\n\n    axios\n      .delete(`/orders/${id}`, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n      .then((res) => {\n        window.M.toast({\n          html: \"Заказ успешно отменен\",\n          classes: \"loginToast\",\n        });\n        history.push(\"/basket\");\n      })\n      .catch((e) => {\n        window.M.toast({\n          html: \"Что прошло не так\",\n          classes: \"loginToastRed\",\n        });\n      });\n  };\n\n  return (\n    <div className=\"container\">\n      <form\n        onSubmit={(e) => onSubmit(e)}\n        className=\"payme card\"\n        style={{\n          maxWidth: \"700px\",\n          margin: \"50px auto\",\n          padding: \"30px\",\n        }}\n      >\n        <img\n          src=\"https://cdn.paycom.uz/documentation_assets/power-by-Payme.svg\"\n          alt=\"payme\"\n          style={{ height: \"80px\", margin: \"0 auto\" }}\n        />\n        <div className=\"row\">\n          <div className=\"input-field col s12\">\n            <input\n              required\n              disabled\n              value={\n                order.phone &&\n                order.products\n                  .map((product) => product.quantity * product.price)\n                  .reduce((acc, item) => acc + item)\n              }\n              id=\"number\"\n              min={1000}\n              type=\"number\"\n              className=\"validate\"\n            />\n            <label htmlFor=\"number\">Итоговая сумма вашего заказа</label>\n          </div>\n        </div>\n        <div className=\"actions\">\n          <button type=\"submit\" className=\"btn mr-1 mb-1 green waves-effect\">\n            Оплатить\n          </button>\n          <button\n            onClick={(e) => cencelOrder(e, id)}\n            type=\"reset\"\n            className=\"btn mb-1 red waves-effect\"\n          >\n            Отменить заказ\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default Ordered;\n"]},"metadata":{},"sourceType":"module"}