{"ast":null,"code":"import _slicedToArray from\"/home/akbar/Desktop/project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import\"./Product.css\";import\"pure-react-carousel/dist/react-carousel.es.css\";import axios from\"axios\";import{useParams}from\"react-router-dom\";import SlickCard from\"../Components/SlickCard\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Product=function Product(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),product=_useState2[0],setProduct=_useState2[1];var params=useParams();useEffect(function(){axios.get(\"/products/\".concat(params.id)).then(function(res){setProduct(res.data);});},[params.id]);var basketHandler=function basketHandler(e){var addedProduct=JSON.parse(localStorage.getItem(\"salamBasket\"));if(!addedProduct){localStorage.setItem(\"salamBasket\",JSON.stringify([{productId:product._id,quantity:1,price:product.sellPrice}]));window.M.toast({html:\"Продукт добавлен\",classes:\"loginToast\"});return;}else{var productIds=addedProduct.map(function(item){return item.productId;});if(addedProduct&&productIds.includes(product._id)){window.M.toast({html:\"Продукт уже существует в ввшем корзине\",classes:\"loginToastYellow\"});return;}else if(addedProduct&&!productIds.includes(product._id)){addedProduct.push({productId:product._id,quantity:1,price:product.sellPrice});localStorage.setItem(\"salamBasket\",JSON.stringify(addedProduct));window.M.toast({html:\"Продукт добавлен\",classes:\"loginToast\"});}}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-3 mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"product-carousel col s12 m7 l8\",children:/*#__PURE__*/_jsx(SlickCard,{images:product&&product.img})}),/*#__PURE__*/_jsxs(\"div\",{className:\"product-action col s12 m5 l4\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"product-articul\",children:\"\\u0410\\u0440\\u0442. \\u0442\\u043E\\u0432. 123456789\"}),/*#__PURE__*/_jsx(\"span\",{className:\"product-title\",children:product&&product.title}),/*#__PURE__*/_jsxs(\"span\",{className:\"product-price\",children:[product&&product.sellPrice,\" \\u0441\\u0443\\u043C\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"product-button btn btn-primary\",onClick:function onClick(e){return basketHandler(e);},children:\"\\u0412 \\u043A\\u043E\\u0440\\u0437\\u0438\\u043D\\u0443\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row product-description\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u0425\\u0430\\u0440\\u0430\\u043A\\u0442\\u0435\\u0440\\u0438\\u0441\\u0442\\u0438\\u043A\\u0438 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0430\"}),/*#__PURE__*/_jsx(\"table\",{className:\"striped\",children:/*#__PURE__*/_jsx(\"tbody\",{children:product&&product.description.split(\",\").map(function(desc,index){return/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{children:desc})},index);})})})]})]});};export default Product;","map":{"version":3,"sources":["/home/akbar/Desktop/project/client/src/pages/Product.js"],"names":["React","useState","useEffect","axios","useParams","SlickCard","Product","product","setProduct","params","get","id","then","res","data","basketHandler","e","addedProduct","JSON","parse","localStorage","getItem","setItem","stringify","productId","_id","quantity","price","sellPrice","window","M","toast","html","classes","productIds","map","item","includes","push","img","title","description","split","desc","index"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport \"./Product.css\";\r\nimport \"pure-react-carousel/dist/react-carousel.es.css\";\r\nimport axios from \"axios\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport SlickCard from \"../Components/SlickCard\";\r\n\r\nconst Product = () => {\r\n  const [product, setProduct] = useState(null);\r\n\r\n  const params = useParams();\r\n\r\n  useEffect(() => {\r\n    axios.get(`/products/${params.id}`).then((res) => {\r\n      setProduct(res.data);\r\n    });\r\n  }, [params.id]);\r\n\r\n  const basketHandler = (e) => {\r\n    let addedProduct = JSON.parse(localStorage.getItem(\"salamBasket\"));\r\n\r\n    if (!addedProduct) {\r\n      localStorage.setItem(\r\n        \"salamBasket\",\r\n        JSON.stringify([\r\n          {\r\n            productId: product._id,\r\n            quantity: 1,\r\n            price: product.sellPrice,\r\n          },\r\n        ])\r\n      );\r\n      window.M.toast({ html: \"Продукт добавлен\", classes: \"loginToast\" });\r\n      return;\r\n    } else {\r\n      const productIds = addedProduct.map((item) => item.productId);\r\n      if (addedProduct && productIds.includes(product._id)) {\r\n        window.M.toast({\r\n          html: \"Продукт уже существует в ввшем корзине\",\r\n          classes: \"loginToastYellow\",\r\n        });\r\n        return;\r\n      } else if (addedProduct && !productIds.includes(product._id)) {\r\n        addedProduct.push({\r\n          productId: product._id,\r\n          quantity: 1,\r\n          price: product.sellPrice,\r\n        });\r\n        localStorage.setItem(\"salamBasket\", JSON.stringify(addedProduct));\r\n        window.M.toast({ html: \"Продукт добавлен\", classes: \"loginToast\" });\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mt-3 mb-3\">\r\n      <div className=\"row\">\r\n        <div className=\"product-carousel col s12 m7 l8\">\r\n          <SlickCard images={product && product.img} />\r\n        </div>\r\n        <div className=\"product-action col s12 m5 l4\">\r\n          <span className=\"product-articul\">Арт. тов. 123456789</span>\r\n          <span className=\"product-title\">{product && product.title}</span>\r\n          <span className=\"product-price\">\r\n            {product && product.sellPrice} сум\r\n          </span>\r\n          <span\r\n            className=\"product-button btn btn-primary\"\r\n            onClick={(e) => basketHandler(e)}\r\n          >\r\n            В корзину\r\n          </span>\r\n        </div>\r\n      </div>\r\n      <div className=\"row product-description\">\r\n        <h4>Характеристики товара</h4>\r\n        <table className=\"striped\">\r\n          <tbody>\r\n            {product &&\r\n              product.description.split(\",\").map((desc, index) => (\r\n                <tr key={index}>\r\n                  <td>{desc}</td>\r\n                </tr>\r\n              ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Product;\r\n"]},"metadata":{},"sourceType":"module"}