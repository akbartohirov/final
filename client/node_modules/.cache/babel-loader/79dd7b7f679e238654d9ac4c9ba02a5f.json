{"ast":null,"code":"import _slicedToArray from\"/home/akbar/Desktop/project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useCallback,useEffect}from\"react\";var storageName=\"userData\";export var useAuth=function useAuth(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),token=_useState2[0],setToken=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),userId=_useState4[0],setUserId=_useState4[1];var login=useCallback(function(jwtToken,id){setToken(jwtToken);setUserId(id);localStorage.setItem(storageName,JSON.stringify({userId:id,token:jwtToken}));},[]);var logout=useCallback(function(){setToken(null);setUserId(null);localStorage.removeItem(storageName);},[]);useEffect(function(){var data=JSON.parse(localStorage.getItem(storageName));if(data&&data.token){login(data.token,data.userId);}},[login]);return{login:login,logout:logout,token:token,userId:userId};};","map":{"version":3,"sources":["/home/akbar/Desktop/project/client/src/hooks/useAuth.js"],"names":["useState","useCallback","useEffect","storageName","useAuth","token","setToken","userId","setUserId","login","jwtToken","id","localStorage","setItem","JSON","stringify","logout","removeItem","data","parse","getItem"],"mappings":"yJAAA,OAASA,QAAT,CAAmBC,WAAnB,CAAgCC,SAAhC,KAAiD,OAAjD,CAEA,GAAMC,CAAAA,WAAW,CAAG,UAApB,CAEA,MAAO,IAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,eACDJ,QAAQ,CAAC,IAAD,CADP,wCACpBK,KADoB,eACbC,QADa,8BAECN,QAAQ,CAAC,IAAD,CAFT,yCAEpBO,MAFoB,eAEZC,SAFY,eAI3B,GAAMC,CAAAA,KAAK,CAAGR,WAAW,CAAC,SAACS,QAAD,CAAWC,EAAX,CAAkB,CAC1CL,QAAQ,CAACI,QAAD,CAAR,CACAF,SAAS,CAACG,EAAD,CAAT,CAEAC,YAAY,CAACC,OAAb,CACEV,WADF,CAEEW,IAAI,CAACC,SAAL,CAAe,CACbR,MAAM,CAAEI,EADK,CAEbN,KAAK,CAAEK,QAFM,CAAf,CAFF,EAOD,CAXwB,CAWtB,EAXsB,CAAzB,CAaA,GAAMM,CAAAA,MAAM,CAAGf,WAAW,CAAC,UAAM,CAC/BK,QAAQ,CAAC,IAAD,CAAR,CACAE,SAAS,CAAC,IAAD,CAAT,CACAI,YAAY,CAACK,UAAb,CAAwBd,WAAxB,EACD,CAJyB,CAIvB,EAJuB,CAA1B,CAMAD,SAAS,CAAC,UAAM,CACd,GAAMgB,CAAAA,IAAI,CAAGJ,IAAI,CAACK,KAAL,CAAWP,YAAY,CAACQ,OAAb,CAAqBjB,WAArB,CAAX,CAAb,CAEA,GAAIe,IAAI,EAAIA,IAAI,CAACb,KAAjB,CAAwB,CACtBI,KAAK,CAACS,IAAI,CAACb,KAAN,CAAaa,IAAI,CAACX,MAAlB,CAAL,CACD,CACF,CANQ,CAMN,CAACE,KAAD,CANM,CAAT,CAQA,MAAO,CAAEA,KAAK,CAALA,KAAF,CAASO,MAAM,CAANA,MAAT,CAAiBX,KAAK,CAALA,KAAjB,CAAwBE,MAAM,CAANA,MAAxB,CAAP,CACD,CAhCM","sourcesContent":["import { useState, useCallback, useEffect } from \"react\";\r\n\r\nconst storageName = \"userData\";\r\n\r\nexport const useAuth = () => {\r\n  const [token, setToken] = useState(null);\r\n  const [userId, setUserId] = useState(null);\r\n\r\n  const login = useCallback((jwtToken, id) => {\r\n    setToken(jwtToken);\r\n    setUserId(id);\r\n\r\n    localStorage.setItem(\r\n      storageName,\r\n      JSON.stringify({\r\n        userId: id,\r\n        token: jwtToken,\r\n      })\r\n    );\r\n  }, []);\r\n\r\n  const logout = useCallback(() => {\r\n    setToken(null);\r\n    setUserId(null);\r\n    localStorage.removeItem(storageName);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const data = JSON.parse(localStorage.getItem(storageName));\r\n\r\n    if (data && data.token) {\r\n      login(data.token, data.userId);\r\n    }\r\n  }, [login]);\r\n\r\n  return { login, logout, token, userId };\r\n};\r\n"]},"metadata":{},"sourceType":"module"}