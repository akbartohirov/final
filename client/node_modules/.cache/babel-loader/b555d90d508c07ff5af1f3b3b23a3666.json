{"ast":null,"code":"import _slicedToArray from\"/home/akbar/Desktop/akbarsfolder/project/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";import axios from\"axios\";import{useLocation,useParams,Link}from\"react-router-dom\";import\"./CatalogProduct.css\";import Loading from\"../Components/Loading/Loading\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var CatalogProduct=function CatalogProduct(){var _subCategories$find;var _React$useState=React.useState({}),_React$useState2=_slicedToArray(_React$useState,2),category=_React$useState2[0],setCategory=_React$useState2[1];var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),subCategories=_React$useState4[0],setSubCategories=_React$useState4[1];var _React$useState5=React.useState([]),_React$useState6=_slicedToArray(_React$useState5,2),subSubCategories=_React$useState6[0],setSubSubCategories=_React$useState6[1];var _useParams=useParams(),id=_useParams.id;var location=useLocation();var useQuery=function useQuery(){return new URLSearchParams(location.search);};var query=useQuery();var subcategory=query.get(\"subcategories\");React.useEffect(function(){axios.get(\"/category/\".concat(id)).then(function(_ref){var data=_ref.data;setCategory(data);});},[id]);React.useEffect(function(){axios.get(\"/subcategory\").then(function(res){setSubCategories(res.data);});},[category]);React.useEffect(function(){axios.get(\"/subsubcategory\").then(function(res){setSubSubCategories(res.data);});},[]);console.log();return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[subCategories.length===0&&/*#__PURE__*/_jsx(Loading,{}),/*#__PURE__*/_jsx(\"div\",{className:\"row mb-3\",children:subcategory?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Link,{style:{display:\"flex\",width:\"80px\",justifyContent:\"space-between\",alignItems:\"center\"},className:\"mt-3\",to:location.pathname,children:[/*#__PURE__*/_jsx(\"i\",{className:\"small material-icons\",children:\"chevron_left\"}),\"\\u041D\\u0430\\u0437\\u0430\\u0434\"]}),/*#__PURE__*/_jsx(\"h4\",{style:{fontWeight:500,marginBottom:\"2rem\"},children:subCategories.length&&((_subCategories$find=subCategories.find(function(el){return el._id===subcategory;}))===null||_subCategories$find===void 0?void 0:_subCategories$find.subCategoryName)}),/*#__PURE__*/_jsx(\"div\",{className:\"subsubcategories\",children:subSubCategories.length&&subSubCategories.filter(function(el){var _subCategories$find2;return el.subCategory===((_subCategories$find2=subCategories.find(function(el){return el._id===subcategory;}))===null||_subCategories$find2===void 0?void 0:_subCategories$find2.subCategoryName);}).map(function(item){return/*#__PURE__*/_jsxs(Link,{to:\"/products/\".concat(item._id),style:{color:\"#000\",fontSize:\"16px\"},className:\"subsubcategory__item link__hover\",children:[\" \",item.subSubCategoryName,\" \"]},item._id);})})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Link,{style:{display:\"flex\",width:\"80px\",justifyContent:\"space-between\",alignItems:\"center\"},className:\"mt-3\",to:\"/catalog\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"small material-icons\",children:\"chevron_left\"}),\"\\u041D\\u0430\\u0437\\u0430\\u0434\"]}),/*#__PURE__*/_jsx(\"h4\",{style:{fontWeight:500,marginBottom:\"2rem\"},children:category.categoryName}),/*#__PURE__*/_jsx(\"div\",{className:\"subcategory-box\",children:subCategories.length>0&&category.categoryName&&subCategories.filter(function(el){return el.category===category.categoryName;}).map(function(el){return/*#__PURE__*/_jsxs(\"div\",{className:\"subcategory\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"subcategory-img\",style:{width:\"100px\"},children:/*#__PURE__*/_jsx(\"img\",{width:\"40px\",src:\"/\".concat(el.img.path),alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"subcategory-content\",children:[/*#__PURE__*/_jsx(Link,{to:\"\".concat(location.pathname,\"?subcategories=\").concat(el._id),children:/*#__PURE__*/_jsx(\"span\",{className:\"link__hover\",style:{color:\"#000\",fontSize:\"18px\",fontWeight:600,marginBottom:\"10px\"},children:el.subCategoryName})}),subSubCategories.length>0&&subSubCategories.filter(function(elem){return elem.subCategory===el.subCategoryName;}).slice(0,3).map(function(item){return/*#__PURE__*/_jsxs(Link,{to:\"/products/\".concat(item._id),style:{color:\"#000\",marginBottom:\"10px\"},className:\"subsubcategory link__hover\",children:[\" \",item.subSubCategoryName,\" \"]},item._id);})]})]},el._id);})})]})})]});};export default CatalogProduct;","map":{"version":3,"sources":["/home/akbar/Desktop/akbarsfolder/project/client/src/pages/CatalogProduct.js"],"names":["React","axios","useLocation","useParams","Link","Loading","CatalogProduct","useState","category","setCategory","subCategories","setSubCategories","subSubCategories","setSubSubCategories","id","location","useQuery","URLSearchParams","search","query","subcategory","get","useEffect","then","data","res","console","log","length","display","width","justifyContent","alignItems","pathname","fontWeight","marginBottom","find","el","_id","subCategoryName","filter","subCategory","map","item","color","fontSize","subSubCategoryName","categoryName","img","path","elem","slice"],"mappings":"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","sourcesContent":["import React from \"react\";\r\nimport axios from \"axios\";\r\nimport { useLocation, useParams, Link } from \"react-router-dom\";\r\nimport \"./CatalogProduct.css\";\r\nimport Loading from \"../Components/Loading/Loading\";\r\n\r\nconst CatalogProduct = () => {\r\n  const [category, setCategory] = React.useState({});\r\n  const [subCategories, setSubCategories] = React.useState([]);\r\n  const [subSubCategories, setSubSubCategories] = React.useState([]);\r\n\r\n  const { id } = useParams();\r\n\r\n  const location = useLocation();\r\n\r\n  const useQuery = () => new URLSearchParams(location.search);\r\n\r\n  let query = useQuery();\r\n\r\n  const subcategory = query.get(\"subcategories\");\r\n\r\n  React.useEffect(() => {\r\n    axios.get(`/category/${id}`).then(({ data }) => {\r\n      setCategory(data);\r\n    });\r\n  }, [id]);\r\n\r\n  React.useEffect(() => {\r\n    axios.get(\"/subcategory\").then((res) => {\r\n      setSubCategories(res.data);\r\n    });\r\n  }, [category]);\r\n\r\n  React.useEffect(() => {\r\n    axios.get(\"/subsubcategory\").then((res) => {\r\n      setSubSubCategories(res.data);\r\n    });\r\n  }, []);\r\n\r\n  console.log();\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      {subCategories.length === 0 && <Loading />}\r\n      <div className=\"row mb-3\">\r\n        {subcategory ? (\r\n          <>\r\n            <Link\r\n              style={{\r\n                display: \"flex\",\r\n                width: \"80px\",\r\n                justifyContent: \"space-between\",\r\n                alignItems: \"center\",\r\n              }}\r\n              className=\"mt-3\"\r\n              to={location.pathname}\r\n            >\r\n              <i className=\"small material-icons\">chevron_left</i>\r\n              Назад\r\n            </Link>\r\n            <h4 style={{ fontWeight: 500, marginBottom: \"2rem\" }}>\r\n              {subCategories.length &&\r\n                subCategories.find((el) => el._id === subcategory)\r\n                  ?.subCategoryName}\r\n            </h4>\r\n            <div className=\"subsubcategories\">\r\n              {subSubCategories.length &&\r\n                subSubCategories\r\n                  .filter(\r\n                    (el) =>\r\n                      el.subCategory ===\r\n                      subCategories.find((el) => el._id === subcategory)\r\n                        ?.subCategoryName\r\n                  )\r\n                  .map((item) => (\r\n                    <Link\r\n                      to={`/products/${item._id}`}\r\n                      style={{ color: \"#000\", fontSize: \"16px\" }}\r\n                      className=\"subsubcategory__item link__hover\"\r\n                      key={item._id}\r\n                    >\r\n                      {\" \"}\r\n                      {item.subSubCategoryName}{\" \"}\r\n                    </Link>\r\n                  ))}\r\n            </div>\r\n          </>\r\n        ) : (\r\n          <>\r\n            <Link\r\n              style={{\r\n                display: \"flex\",\r\n                width: \"80px\",\r\n                justifyContent: \"space-between\",\r\n                alignItems: \"center\",\r\n              }}\r\n              className=\"mt-3\"\r\n              to={\"/catalog\"}\r\n            >\r\n              <i className=\"small material-icons\">chevron_left</i>\r\n              Назад\r\n            </Link>\r\n            <h4 style={{ fontWeight: 500, marginBottom: \"2rem\" }}>\r\n              {category.categoryName}\r\n            </h4>\r\n            <div className=\"subcategory-box\">\r\n              {subCategories.length > 0 &&\r\n                category.categoryName &&\r\n                subCategories\r\n                  .filter((el) => el.category === category.categoryName)\r\n                  .map((el) => (\r\n                    <div key={el._id} className=\"subcategory\">\r\n                      <div\r\n                        className=\"subcategory-img\"\r\n                        style={{ width: \"100px\" }}\r\n                      >\r\n                        <img width={\"40px\"} src={`/${el.img.path}`} alt=\"\" />\r\n                      </div>\r\n                      <div className=\"subcategory-content\">\r\n                        <Link\r\n                          to={`${location.pathname}?subcategories=${el._id}`}\r\n                        >\r\n                          <span\r\n                            className=\"link__hover\"\r\n                            style={{\r\n                              color: \"#000\",\r\n                              fontSize: \"18px\",\r\n                              fontWeight: 600,\r\n                              marginBottom: \"10px\",\r\n                            }}\r\n                          >\r\n                            {el.subCategoryName}\r\n                          </span>\r\n                        </Link>\r\n                        {subSubCategories.length > 0 &&\r\n                          subSubCategories\r\n                            .filter(\r\n                              (elem) => elem.subCategory === el.subCategoryName\r\n                            )\r\n                            .slice(0, 3)\r\n                            .map((item) => (\r\n                              <Link\r\n                                to={`/products/${item._id}`}\r\n                                style={{ color: \"#000\", marginBottom: \"10px\" }}\r\n                                className=\"subsubcategory link__hover\"\r\n                                key={item._id}\r\n                              >\r\n                                {\" \"}\r\n                                {item.subSubCategoryName}{\" \"}\r\n                              </Link>\r\n                            ))}\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CatalogProduct;\r\n"]},"metadata":{},"sourceType":"module"}