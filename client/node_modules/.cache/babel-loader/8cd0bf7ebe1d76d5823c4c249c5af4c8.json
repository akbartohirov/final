{"ast":null,"code":"import _toConsumableArray from\"/home/akbar/Desktop/salam/final/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/akbar/Desktop/salam/final/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from\"react\";// import AdminSidebar from \"../../../Components/\";\nimport AdminSidebar from\"../../../Components/AdminSidebar\";import\"./AdminProductDetailsPage.css\";import axios from\"axios\";import{useParams}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var AdminProductDetailsPage=function AdminProductDetailsPage(){var _React$useState=React.useState([]),_React$useState2=_slicedToArray(_React$useState,2),categories=_React$useState2[0],setCategories=_React$useState2[1];var _React$useState3=React.useState([]),_React$useState4=_slicedToArray(_React$useState3,2),subCategories=_React$useState4[0],setSubCategories=_React$useState4[1];var _React$useState5=React.useState([]),_React$useState6=_slicedToArray(_React$useState5,2),subSubcategories=_React$useState6[0],setSubSubCategories=_React$useState6[1];var _React$useState7=React.useState([]),_React$useState8=_slicedToArray(_React$useState7,2),brands=_React$useState8[0],setBrands=_React$useState8[1];var _React$useState9=React.useState(\"\"),_React$useState10=_slicedToArray(_React$useState9,2),title=_React$useState10[0],setTitle=_React$useState10[1];var _React$useState11=React.useState(\"\"),_React$useState12=_slicedToArray(_React$useState11,2),brand=_React$useState12[0],setBrand=_React$useState12[1];var _React$useState13=React.useState(\"\"),_React$useState14=_slicedToArray(_React$useState13,2),category=_React$useState14[0],setCategory=_React$useState14[1];var _React$useState15=React.useState(\"\"),_React$useState16=_slicedToArray(_React$useState15,2),subCategory=_React$useState16[0],setSubCategory=_React$useState16[1];var _React$useState17=React.useState(\"\"),_React$useState18=_slicedToArray(_React$useState17,2),subSubCategory=_React$useState18[0],setSubSubCategory=_React$useState18[1];var _React$useState19=React.useState(\"\"),_React$useState20=_slicedToArray(_React$useState19,2),description=_React$useState20[0],setDescription=_React$useState20[1];var _React$useState21=React.useState(\"\"),_React$useState22=_slicedToArray(_React$useState21,2),color=_React$useState22[0],setColor=_React$useState22[1];var _React$useState23=React.useState(\"\"),_React$useState24=_slicedToArray(_React$useState23,2),sellPrice=_React$useState24[0],setSellPrice=_React$useState24[1];var _React$useState25=React.useState(\"\"),_React$useState26=_slicedToArray(_React$useState25,2),boughtPrice=_React$useState26[0],setBoughtPrice=_React$useState26[1];var _React$useState27=React.useState(\"\"),_React$useState28=_slicedToArray(_React$useState27,2),amount=_React$useState28[0],setAmount=_React$useState28[1];var _React$useState29=React.useState([]),_React$useState30=_slicedToArray(_React$useState29,2),img=_React$useState30[0],setImg=_React$useState30[1];var _React$useState31=React.useState([]),_React$useState32=_slicedToArray(_React$useState31,2),uploadedImages=_React$useState32[0],setUploadedImages=_React$useState32[1];var _useParams=useParams(),id=_useParams.id;React.useEffect(function(){axios.get(\"/category\").then(function(res){setCategories(res.data);});},[]);React.useEffect(function(){axios.get(\"/category\").then(function(res){setCategories(res.data);});},[]);React.useEffect(function(){axios.get(\"/subcategory\").then(function(res){setSubCategories(res.data);});},[]);React.useEffect(function(){axios.get(\"/subsubcategory\").then(function(res){setSubSubCategories(res.data);});},[]);React.useEffect(function(){axios.get(\"/brand\").then(function(res){setBrands(res.data);});},[]);React.useEffect(function(){axios.get(\"/subcategory\").then(function(res){setSubCategories(res.data);});},[]);React.useEffect(function(){axios.get(\"/subsubcategory\").then(function(res){setSubSubCategories(res.data);});},[]);React.useEffect(function(){axios.get(\"/brand\").then(function(res){setBrands(res.data);});},[]);React.useEffect(function(){var _JSON$parse=JSON.parse(localStorage.getItem(\"userData\")),token=_JSON$parse.token;axios.get(\"/products/\".concat(id),{headers:{Authorization:\"Bearer \".concat(token)}}).then(function(_ref){var data=_ref.data;setTitle(data.title);setCategory(data.category);setSubCategory(data.subCategory);setSubSubCategory(data.subSubCategory);setDescription(data.description);setColor(data.color);setSellPrice(data.sellPrice);setBoughtPrice(data.boughtPrice);setAmount(data.amount);setImg(data.img);data.brand&&setBrand(data.brand);});},[id]);var submitHanler=function submitHanler(e){e.preventDefault();var _JSON$parse2=JSON.parse(localStorage.getItem(\"userData\")),token=_JSON$parse2.token;var fd=new FormData();fd.append(\"title\",title);fd.append(\"category\",category);fd.append(\"subcategory\",subCategory);fd.append(\"subsubcategory\",subSubCategory);fd.append(\"brand\",brand);fd.append(\"description\",description);fd.append(\"color\",color);fd.append(\"sellPrice\",sellPrice);fd.append(\"boughtPrice\",boughtPrice);fd.append(\"amount\",amount);uploadedImages.map(function(el){return fd.append(\"img\",el);});axios.put(\"/products/\".concat(id),uploadedImages.length>0?fd:{title:title,color:color,category:category,sellPrice:sellPrice,boughtPrice:boughtPrice,description:description,amount:amount,img:img},{headers:{Authorization:\"Bearer \".concat(token)}}).then(function(res){console.log(res);window.M.toast({html:\"Продукт изменён\",classes:\"loginToast\"});}).catch(function(e){window.M.toast({html:\"Продукт не изменён\",classes:\"loginToastRed\"});});};var filteredSubCategories=category&&subCategories.filter(function(el){return el.category===category;});var filteredSubSubCategories=subCategory&&subSubcategories.filter(function(el){return el.subCategory===subCategory;});return/*#__PURE__*/_jsxs(\"div\",{className:\"adminPage\",children:[/*#__PURE__*/_jsx(AdminSidebar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"adminUsersDetailsPage\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"center-align\",children:\"\\u0414\\u0430\\u043D\\u043D\\u044B\\u0435 \\u043F\\u0440\\u043E\\u0434\\u0443\\u043A\\u0442\\u0430\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"col m6 offset-m3\",onSubmit:function onSubmit(e){return submitHanler(e);},children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"input-field col s12\",children:/*#__PURE__*/_jsxs(\"select\",{value:category,onChange:function onChange(e){return setCategory(e.target.value);},className:\"browser-default\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,children:\"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"}),categories.length>0&&categories.map(function(el){return/*#__PURE__*/_jsx(\"option\",{value:el.categoryName,children:el.categoryName},el._id);})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"input-field col s12\",children:/*#__PURE__*/_jsxs(\"select\",{value:subCategory,onChange:function onChange(e){return setSubCategory(e.target.value);},className:\"browser-default\",disabled:category?false:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,children:\"\\u041F\\u043E\\u0434\\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"}),filteredSubCategories.length>0&&filteredSubCategories.map(function(el){return/*#__PURE__*/_jsx(\"option\",{value:el.subCategoryName,children:el.subCategoryName},el._id);})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"input-field col s12\",children:/*#__PURE__*/_jsxs(\"select\",{value:subSubCategory,onChange:function onChange(e){return setSubSubCategory(e.target.value);},className:\"browser-default\",disabled:subCategory?false:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,children:\"\\u041F\\u043E\\u0434\\u043F\\u043E\\u0434\\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"}),filteredSubSubCategories.length>0&&filteredSubSubCategories.map(function(el){return/*#__PURE__*/_jsx(\"option\",{value:el.subSubCategoryName,children:el.subSubCategoryName},el._id);})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"input-field col s12\",children:/*#__PURE__*/_jsxs(\"select\",{value:brand,onChange:function onChange(e){return setBrand(e.target.value);},className:\"browser-default\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,children:\"\\u0411\\u0440\\u0435\\u043D\\u0434\"}),brands.length>0&&brands.map(function(el){return/*#__PURE__*/_jsx(\"option\",{value:el.brandName,children:el.brandName},el._id);})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-field col s12\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"title\",type:\"text\",className:\"validate\",value:title,onChange:function onChange(e){return setTitle(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",children:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0430\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-field colorcol s12\",children:[/*#__PURE__*/_jsx(\"textarea\",{id:\"description\",type:\"text\",className:\"validate materialize-textarea\",\"data-length\":\"120\",value:description,onChange:function onChange(e){return setDescription(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"description\",children:\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-field col s12\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"color\",type:\"text\",className:\"validate\",value:color,onChange:function onChange(e){return setColor(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"color\",children:\"\\u0426\\u0432\\u0435\\u0442\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-field col s12\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"sellPrice\",type:\"number\",className:\"validate\",value:sellPrice,onChange:function onChange(e){return setSellPrice(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"sellPrice\",children:\"\\u0426\\u0435\\u043D\\u0430 \\u043F\\u043E\\u043A\\u0443\\u043F\\u043A\\u0438\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-field col s12\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"boughtPrice\",type:\"number\",className:\"validate\",value:boughtPrice,onChange:function onChange(e){return setBoughtPrice(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"boughtPrice\",children:\"\\u0426\\u0435\\u043D\\u0430 \\u043F\\u0440\\u043E\\u0434\\u0430\\u0436\\u0438\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-field col s12\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"amount\",type:\"text\",className:\"validate\",value:amount,onChange:function onChange(e){return setAmount(e.target.value);}}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"amount\",children:\"\\u041A\\u043E\\u043B\\u0438\\u0447\\u0435\\u0441\\u0442\\u0432\\u043E\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"file-field input-field col s12\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"btn\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u0418\\u0437\\u043E\\u0431\\u0440\\u0430\\u0436\\u0435\\u043D\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",multiple:true,onChange:function onChange(e){return setUploadedImages(_toConsumableArray(e.target.files));}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"file-path-wrapper\",children:/*#__PURE__*/_jsx(\"input\",{className:\"file-path validate\",type:\"text\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"input-field col s12\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn\",type:\"submit\",children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"})})})]})})]})]});};export default AdminProductDetailsPage;","map":{"version":3,"sources":["/home/akbar/Desktop/salam/final/client/src/pages/adminpages/admindetailspage/AdminProductDetailsPage.js"],"names":["React","AdminSidebar","axios","useParams","AdminProductDetailsPage","useState","categories","setCategories","subCategories","setSubCategories","subSubcategories","setSubSubCategories","brands","setBrands","title","setTitle","brand","setBrand","category","setCategory","subCategory","setSubCategory","subSubCategory","setSubSubCategory","description","setDescription","color","setColor","sellPrice","setSellPrice","boughtPrice","setBoughtPrice","amount","setAmount","img","setImg","uploadedImages","setUploadedImages","id","useEffect","get","then","res","data","JSON","parse","localStorage","getItem","token","headers","Authorization","submitHanler","e","preventDefault","fd","FormData","append","map","el","put","length","console","log","window","M","toast","html","classes","catch","filteredSubCategories","filter","filteredSubSubCategories","target","value","categoryName","_id","subCategoryName","subSubCategoryName","brandName","files"],"mappings":"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","sourcesContent":["import React from \"react\";\n// import AdminSidebar from \"../../../Components/\";\nimport AdminSidebar from \"../../../Components/AdminSidebar\";\nimport \"./AdminProductDetailsPage.css\";\nimport axios from \"axios\";\nimport { useParams } from \"react-router-dom\";\n\nconst AdminProductDetailsPage = () => {\n  const [categories, setCategories] = React.useState([]);\n  const [subCategories, setSubCategories] = React.useState([]);\n  const [subSubcategories, setSubSubCategories] = React.useState([]);\n  const [brands, setBrands] = React.useState([]);\n\n  const [title, setTitle] = React.useState(\"\");\n  const [brand, setBrand] = React.useState(\"\");\n  const [category, setCategory] = React.useState(\"\");\n  const [subCategory, setSubCategory] = React.useState(\"\");\n  const [subSubCategory, setSubSubCategory] = React.useState(\"\");\n  const [description, setDescription] = React.useState(\"\");\n  const [color, setColor] = React.useState(\"\");\n  const [sellPrice, setSellPrice] = React.useState(\"\");\n  const [boughtPrice, setBoughtPrice] = React.useState(\"\");\n  const [amount, setAmount] = React.useState(\"\");\n  const [img, setImg] = React.useState([]);\n  const [uploadedImages, setUploadedImages] = React.useState([]);\n\n  const { id } = useParams();\n\n  React.useEffect(() => {\n    axios.get(\"/category\").then((res) => {\n      setCategories(res.data);\n    });\n  }, []);\n  React.useEffect(() => {\n    axios.get(\"/category\").then((res) => {\n      setCategories(res.data);\n    });\n  }, []);\n\n  React.useEffect(() => {\n    axios.get(\"/subcategory\").then((res) => {\n      setSubCategories(res.data);\n    });\n  }, []);\n\n  React.useEffect(() => {\n    axios.get(\"/subsubcategory\").then((res) => {\n      setSubSubCategories(res.data);\n    });\n  }, []);\n\n  React.useEffect(() => {\n    axios.get(\"/brand\").then((res) => {\n      setBrands(res.data);\n    });\n  }, []);\n  React.useEffect(() => {\n    axios.get(\"/subcategory\").then((res) => {\n      setSubCategories(res.data);\n    });\n  }, []);\n\n  React.useEffect(() => {\n    axios.get(\"/subsubcategory\").then((res) => {\n      setSubSubCategories(res.data);\n    });\n  }, []);\n\n  React.useEffect(() => {\n    axios.get(\"/brand\").then((res) => {\n      setBrands(res.data);\n    });\n  }, []);\n\n  React.useEffect(() => {\n    const { token } = JSON.parse(localStorage.getItem(\"userData\"));\n\n    axios\n      .get(`/products/${id}`, {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n      .then(({ data }) => {\n        setTitle(data.title);\n        setCategory(data.category);\n        setSubCategory(data.subCategory);\n        setSubSubCategory(data.subSubCategory);\n        setDescription(data.description);\n        setColor(data.color);\n        setSellPrice(data.sellPrice);\n        setBoughtPrice(data.boughtPrice);\n        setAmount(data.amount);\n        setImg(data.img);\n        data.brand && setBrand(data.brand);\n      });\n  }, [id]);\n\n  const submitHanler = (e) => {\n    e.preventDefault();\n\n    const { token } = JSON.parse(localStorage.getItem(\"userData\"));\n\n    const fd = new FormData();\n\n    fd.append(\"title\", title);\n    fd.append(\"category\", category);\n    fd.append(\"subcategory\", subCategory);\n    fd.append(\"subsubcategory\", subSubCategory);\n    fd.append(\"brand\", brand);\n    fd.append(\"description\", description);\n    fd.append(\"color\", color);\n    fd.append(\"sellPrice\", sellPrice);\n    fd.append(\"boughtPrice\", boughtPrice);\n    fd.append(\"amount\", amount);\n    uploadedImages.map((el) => fd.append(\"img\", el));\n\n    axios\n      .put(\n        `/products/${id}`,\n        uploadedImages.length > 0\n          ? fd\n          : {\n              title,\n              color,\n              category,\n              sellPrice,\n              boughtPrice,\n              description,\n              amount,\n              img,\n            },\n        {\n          headers: {\n            Authorization: `Bearer ${token}`,\n          },\n        }\n      )\n      .then((res) => {\n        console.log(res);\n        window.M.toast({ html: \"Продукт изменён\", classes: \"loginToast\" });\n      })\n      .catch((e) => {\n        window.M.toast({\n          html: \"Продукт не изменён\",\n          classes: \"loginToastRed\",\n        });\n      });\n  };\n\n  const filteredSubCategories =\n    category && subCategories.filter((el) => el.category === category);\n\n  const filteredSubSubCategories =\n    subCategory &&\n    subSubcategories.filter((el) => el.subCategory === subCategory);\n\n  return (\n    <div className=\"adminPage\">\n      <AdminSidebar />\n      <div className=\"adminUsersDetailsPage\">\n        <h4 className=\"center-align\">Данные продукта</h4>\n        <div className=\"row\">\n          <form className=\"col m6 offset-m3\" onSubmit={(e) => submitHanler(e)}>\n            <div className=\"row\">\n              <div className=\"input-field col s12\">\n                <select\n                  value={category}\n                  onChange={(e) => setCategory(e.target.value)}\n                  className=\"browser-default\"\n                >\n                  <option value=\"\" disabled>\n                    Категория\n                  </option>\n                  {categories.length > 0 &&\n                    categories.map((el) => (\n                      <option key={el._id} value={el.categoryName}>\n                        {el.categoryName}\n                      </option>\n                    ))}\n                </select>\n              </div>\n            </div>\n\n            <div className=\"row\">\n              <div className=\"input-field col s12\">\n                <select\n                  value={subCategory}\n                  onChange={(e) => setSubCategory(e.target.value)}\n                  className=\"browser-default\"\n                  disabled={category ? false : true}\n                >\n                  <option value=\"\" disabled>\n                    Подкатегория\n                  </option>\n                  {filteredSubCategories.length > 0 &&\n                    filteredSubCategories.map((el) => (\n                      <option key={el._id} value={el.subCategoryName}>\n                        {el.subCategoryName}\n                      </option>\n                    ))}\n                </select>\n              </div>\n            </div>\n\n            <div className=\"row\">\n              <div className=\"input-field col s12\">\n                <select\n                  value={subSubCategory}\n                  onChange={(e) => setSubSubCategory(e.target.value)}\n                  className=\"browser-default\"\n                  disabled={subCategory ? false : true}\n                >\n                  <option value=\"\" disabled>\n                    Подподкатегория\n                  </option>\n                  {filteredSubSubCategories.length > 0 &&\n                    filteredSubSubCategories.map((el) => (\n                      <option key={el._id} value={el.subSubCategoryName}>\n                        {el.subSubCategoryName}\n                      </option>\n                    ))}\n                </select>\n              </div>\n            </div>\n\n            <div className=\"row\">\n              <div className=\"input-field col s12\">\n                <select\n                  value={brand}\n                  onChange={(e) => setBrand(e.target.value)}\n                  className=\"browser-default\"\n                >\n                  <option value=\"\" disabled>\n                    Бренд\n                  </option>\n                  {brands.length > 0 &&\n                    brands.map((el) => (\n                      <option key={el._id} value={el.brandName}>\n                        {el.brandName}\n                      </option>\n                    ))}\n                </select>\n              </div>\n            </div>\n\n            <div className=\"row\">\n              <div className=\"input-field col s12\">\n                <input\n                  id=\"title\"\n                  type=\"text\"\n                  className=\"validate\"\n                  value={title}\n                  onChange={(e) => setTitle(e.target.value)}\n                />\n                <label htmlFor=\"title\">Название товара</label>\n              </div>\n            </div>\n\n            <div className=\"row\">\n              <div className=\"input-field colorcol s12\">\n                <textarea\n                  id=\"description\"\n                  type=\"text\"\n                  className=\"validate materialize-textarea\"\n                  data-length=\"120\"\n                  value={description}\n                  onChange={(e) => setDescription(e.target.value)}\n                />\n                <label htmlFor=\"description\">Описание</label>\n              </div>\n            </div>\n            <div className=\"row\">\n              <div className=\"input-field col s12\">\n                <input\n                  id=\"color\"\n                  type=\"text\"\n                  className=\"validate\"\n                  value={color}\n                  onChange={(e) => setColor(e.target.value)}\n                />\n                <label htmlFor=\"color\">Цвет</label>\n              </div>\n            </div>\n\n            <div className=\"row\">\n              <div className=\"input-field col s12\">\n                <input\n                  id=\"sellPrice\"\n                  type=\"number\"\n                  className=\"validate\"\n                  value={sellPrice}\n                  onChange={(e) => setSellPrice(e.target.value)}\n                />\n                <label htmlFor=\"sellPrice\">Цена покупки</label>\n              </div>\n            </div>\n\n            <div className=\"row\">\n              <div className=\"input-field col s12\">\n                <input\n                  id=\"boughtPrice\"\n                  type=\"number\"\n                  className=\"validate\"\n                  value={boughtPrice}\n                  onChange={(e) => setBoughtPrice(e.target.value)}\n                />\n                <label htmlFor=\"boughtPrice\">Цена продажи</label>\n              </div>\n            </div>\n\n            <div className=\"row\">\n              <div className=\"input-field col s12\">\n                <input\n                  id=\"amount\"\n                  type=\"text\"\n                  className=\"validate\"\n                  value={amount}\n                  onChange={(e) => setAmount(e.target.value)}\n                />\n                <label htmlFor=\"amount\">Количество</label>\n              </div>\n            </div>\n\n            <div className=\"row\">\n              <div className=\"file-field input-field col s12\">\n                <div className=\"btn\">\n                  <span>Изображения</span>\n                  <input\n                    type=\"file\"\n                    multiple\n                    onChange={(e) => setUploadedImages([...e.target.files])}\n                  />\n                </div>\n                <div className=\"file-path-wrapper\">\n                  <input className=\"file-path validate\" type=\"text\" />\n                </div>\n              </div>\n            </div>\n\n            <div className=\"row\">\n              <div className=\"input-field col s12\">\n                <button className=\"btn\" type=\"submit\">\n                  Сохранить\n                </button>\n              </div>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AdminProductDetailsPage;\n"]},"metadata":{},"sourceType":"module"}